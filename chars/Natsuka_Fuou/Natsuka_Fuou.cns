[Data]
life = 952
power = 3000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 80
airjuggle = 999
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 0
IntPersistIndex = 40
FloatPersistIndex = 30

[Size]
xscale = 0.5
yscale = 0.5
ground.back = 15
ground.front = 15
air.back = 5
air.front = 5
height = 70
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 1
head.pos = 5, -80
mid.pos = 0, -50
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd = 3.2
walk.back = -2.5
run.fwd = 7, 0
run.back =-4.2, -4.9
jump.neu = 0, -10.4
jump.back = -3.8
jump.fwd = 4.0
runjump.fwd = 5.8
airjump.neu = 0,-10.4
airjump.back = -3.8
airjump.fwd = 4.0

[Movement]
airjump.num = 1		;空中でジャンプする回数
airjump.height = 50		;空中でジャンプする最低限の高さ
yaccel = .62			;重力
stand.friction = .85		;立ち状態の摩擦係数
crouch.friction = .82	;屈み状態の摩擦係数

[ja.Quotes]
victory1 = "フッ、弱いぜ。"
victory2 = "なかなかやるじゃん、でもそれじゃあ負けてはやれないね。"
victory3 = "リベンジマッチは大歓迎、もっと強くなったらまた来なよ。/まあ、そん時は私はもっと強いんだけどな。"
victory4 = "やっぱり最高だね。何も背負うものの無い殴り合いってのはさ！"
victory5 = "わたしの実力に気付けないようじゃあ、アンタまだまだ甘いねぇ。"
victory6 = "アンタみたいな青二才に華持たせてやるほど、お人好しではないのだよ！"
victory7 = "在野にこんなツワモノが埋もれてたなんてね。結構楽しめたよ？"


;-|演出関係|-----------------------------------------------------------------------------------------------------------

;タイムオーバー敗北
[statedef 170]
type = S
ctrl = 0
velset = 0,0

[state 170, 1]
type = changeanim
trigger1 = time = 0
value = 170


;勝利ポーズ
[statedef 180]
type = S

[state 180, 勝利ポーズ2へ]
type = changestate
trigger1 = time = 0
trigger1 = matchover
value = 182

[state 180, 勝利ポーズ１へ]
type = changestate
trigger1 = time = 0
value = 181

;勝利ポーズ1
[statedef 181]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[state 181, 勝利ポーズ１]
type = changeanim
trigger1 = time = 0
value = 181

[state 181, SE]
type = playsnd
trigger1 = animelem = 5
value = 2,3

;勝利ポーズ2
[statedef 182]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[state 182, 勝利ポーズ２]
type = changeanim
trigger1 = time = 0
value = 182

[state 182, SE]
type = playsnd
trigger1 = animelem = 3
value = 3,4

;登場アクション
[statedef 191]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[state 191, 登場アクションアニメ]
type = changeanim
trigger1 = roundstate = 0
value = 191

[state 191, 動作中はラウンド開始しない]
type = assertspecial
trigger1 = 1
flag = intro

[state 191, 動作終了]
type = changestate
trigger1 = anim = 191
trigger1 = animtime = 0
value = 0


;挑発
[statedef 195]
type = S
movetype = I
physics = S
velset = 0,0
anim = 195
ctrl = 0
sprpriority = 2

[state 195, ゲージ増加]
type = poweradd
triggerall = var(40) = 1
trigger1 = animtime = 0
value = 200

[state 195, 終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-|特殊動作|----------------------------------------------------------------------------------------

;攻撃避け
[statedef 800]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 800
poweradd = 0
sprpriority = -2

[state 800, 全身無敵]
type = nothitby
trigger1 = 1
value = ,AA,AP

[state 800, 接触判定消滅]
type = playerpush
trigger1 = 1
value = 0

[state 800, ガード動作移行条件解除]
type = attackdist
trigger1 = time = 0
value = 0

[state 800, 残像]
type = afterimage
trigger1 = animelem = 1
time = 28
length = 8
timegap = 1
framegap = 2
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[state 800, 残像消去]
type = afterimage
trigger1 = animtime = 0
time = 0

[state 800, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;回り込み
[statedef 850]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 850
poweradd = 0
sprpriority = -2

[state 850, 全身無敵]
type = nothitby
trigger1 = time <= 22
value = ,AA,AP

[state 850, 接触判定消滅]
type = playerpush
trigger1 = 1
value = 0

[state 850, ガード動作移行条件解除]
type = attackdist
trigger1 = time = 0
value = 0

[state 850, SE1]
type = playsnd
trigger1 = animelem = 1
value = 40,0

[state 850, 速度]
type = velset
trigger1 = animelem = 2
x = 4.8

[state 850, 座標調整]
type = posadd
trigger1 = animelem = 3
x = 17

[state 850, SE2]
type = playsnd
trigger1 = animelem = 2
value = 3,4

[state 850, 残像]
type = afterimage
trigger1 = animelem = 1
time = 30
length = 8
timegap = 1
framegap = 2
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[state 850, 移動終了]
type = velset
trigger1 = animelem = 8
x = 0

[state 850, 残像消去]
type = afterimage
trigger1 = animtime = 0
time = 0

[state 850, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;パワー溜め動作
[statedef 860]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 860
poweradd = 0
sprpriority = 2

[state 860, パワー蓄積]
type = poweradd
trigger1 = anim = 860
trigger1 = 1
value = 6+time/16

[state 860, パワー溜め終了]
type = changeanim
trigger1 = command != "chargec" || command != "chargez"
trigger2 = power >= 1000
value = 861
persistent = 0

[state 860, 行動可能]
type = ctrlset
triggerall = ctrl = 0
trigger1 = anim = 861
value = 1

[state 860, 動作終了]
type = changestate
trigger1 = anim = 861 && animtime = 0
value = 0
ctrl = 1


;-|ガードキャンセル行動|------------------------------------------------------------------------------------

;ガードキャンセル回り込み
[statedef 900]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = 2

[state 900, POW.MAX終了]
type = varset
trigger1 = var(40) = 0
trigger1 = time = 0
var(20) = 0

[state 900, ゲージ消費]
type = poweradd
trigger1 = var(40) = 1
trigger1 = time = 0
value = -1000

[state 900, 全身無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 900, 時間停止]
type = pause
trigger1 = time = 0
time = 13
movetime = 13

[state 900, 接触判定消滅]
type = playerpush
trigger1 = 1
value = 0

[state 900, ガード動作移行条件解除]
type = attackdist
trigger1 = time = 0
value = 0

[state 900, フラッシュ]
type = palfx
trigger1 = time = 0
time = 3
add = 256,256,256

[state 900, エフェクト]
type = explod
trigger1 = time = 0
anim = 8120
pos = 26,ifelse(statetype = C, -56, -83)
postype = P1
supermove = 1
pausemovetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[state 900, 回り込み動作に移行]
type = changeanim
trigger1 = time = 13
value = 850

[state 900, SE1]
type = playsnd
trigger1 = anim = 850
trigger1 = animelem = 1
value = 40,0

[state 900, 速度]
type = velset
trigger1 = anim = 850
trigger1 = animelem = 2
x = 4.5

[state 900, SE2]
type = playsnd
trigger1 = anim = 850
trigger1 = animelem = 2
value = 3,4

[state 900, 描画優先度調整]
type = sprpriority
trigger1 = anim = 850
trigger1 = animelem = 2
value = -2

[state 900, 残像]
type = afterimage
trigger1 = anim = 850
trigger1 = animelem = 1
time = 30
length = 8
timegap = 1
framegap = 2
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[state 900, 移動終了]
type = velset
trigger1 = anim = 850
trigger1 = animelem = 8
x = 0

[state 900, 残像消去]
type = afterimage
trigger1 = anim = 850
trigger1 = animtime = 0
time = 0

[state 900, 動作終了]
type = changestate
trigger1 = anim = 850
trigger1 = animtime = 0
value = 0
ctrl = 1

;ガードキャンセルバックステップ
[statedef 910]
type = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[state 910, POW.MAX終了]
type = varset
trigger1 = var(40) = 0
trigger1 = time = 0
var(20) = 0

[state 910, ゲージ消費]
type = poweradd
trigger1 = var(40) = 1
trigger1 = time = 0
value = -1000

[state 910, 時間停止]
type = pause
trigger1 = time = 0
time = 13
movetime = 13

[state 910, 全身無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 910, 接触判定消滅]
type = playerpush
trigger1 = 1
value = 0

[state 910, フラッシュ]
type = palfx
trigger1 = time = 0
time = 3
add = 256,256,256

[state 910, エフェクト]
type = explod
trigger1 = time = 0
anim = 8120
pos = 26,ifelse(statetype = C, -56, -83)
postype = P1
supermove = 1
pausemovetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[state 910, バックステップ動作]
type = changeanim
trigger1 = time = 13
value = 105

[state 910, SE1]
type = playsnd
trigger1 = anim = 105
trigger1 = animelem = 2
value = 105,0

[state 910, SE2]
type = playsnd
trigger1 = anim = 106
trigger1 = animelem = 2
value = 105,0

[state 910, 速度]
type = velset
trigger1 = anim = 105 && animelem = 2
trigger2 = anim = 106 && animelem = 2
X = const(Velocity.run.back.x)
y = const(Velocity.run.back.y)

[state 910, 重力]
type = veladd
trigger1 = anim = 105 && animelemtime(2) >= 0
trigger2 = anim = 106 && animelemtime(2) >= 0
y = 0.5

[state 910, バク転後半]
type = changeanim
trigger1 = anim = 105
trigger1 = animelemtime(2) >= 1
trigger1 = Pos Y >= 0
value = 106

[state 910, 位置調整]
type = posset
trigger1 = anim = 106 && animelem = 1
y = 0

[state 910, 速度2]
type = velset
trigger1 = anim = 106 && animelem = 1
x = 0
y = 0

[state 910, 着地へ移行]
type = changestate
trigger1 = anim = 106
trigger1 = animelemtime(2) >= 1
trigger1 = Pos Y >= 0
value = 911

;バックステップ着地
[statedef 911]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 107

[state 911, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 911, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 911, SE]
type = playsnd
trigger1 = time = 0
value = 52, 0

[state 911, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;ガードキャンセル攻撃1
[statedef 920]
type    = S
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 920
poweradd = 0
sprpriority = 3

[state 920, POW.MAX終了]
type = varset
trigger1 = var(40) = 0
trigger1 = time = 0
var(20) = 0

[state 920, ゲージ消費]
type = poweradd
trigger1 = var(40) = 1
trigger1 = time = 0
value = -1000

[state 920, 時間停止]
type = pause
trigger1 = time = 0
time = 17
movetime = 17

[state 920, 無敵]
type = nothitby
trigger1 = animelemtime(4) < 0
value = SCA,AA,AT,AP

[state 920, フラッシュ]
type = palfx
trigger1 = time = 0
time = 3
add = 256,256,256

[state 920, エフェクト]
type = explod
trigger1 = time = 0
anim = 8120
pos = 26,ifelse(statetype = C, -56, -83)
postype = P1
supermove = 1
pausemovetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[state 920, SE]
type = playsnd
trigger1 = animelem = 2
value = 3,2

[state 920, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 4 && !movecontact && !movereversed
attr = S,NA
damage = ceil(42 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-55
hitsound = s2,2
guardsound = s1,0
animtype = Hard
ground.type = Low
air.type = Low
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -4.2, 0
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 920, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(42*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 920, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 920, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(42*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 920, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 920, フォロースルー]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 920, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ガードキャンセル攻撃2
[statedef 930]
type = S
movetype = A
physics = N
juggle = 1
velset = 0,0
ctrl = 0
anim = 930
poweradd = 0
sprpriority = 3

[state 930, POW.MAX終了]
type = varset
trigger1 = var(40) = 0
trigger1 = time = 0
var(20) = 0

[state 930, ゲージ消費]
type = poweradd
trigger1 = var(40) = 1
trigger1 = time = 0
value = -1000

[state 930, 無敵]
type = nothitby
trigger1 = animelemtime(7) < 0
value = SCA,AA,AT,AP

[state 930, 時間停止]
type = pause
trigger1 = time = 0
time = 18
movetime = 18

[state 920, フラッシュ]
type = palfx
trigger1 = time = 0
time = 3
add = 256,256,256

[state 930, エフェクト]
type = explod
trigger1 = time = 0
anim = 8120
pos = 26,ifelse(statetype = C, -56, -83)
postype = P1
supermove = 1
pausemovetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[state 930, 接触判定拡大]
type = width
trigger1 = animelemtime(2) >= 0
value = 20,0

[state 930, SE1]
type = playsnd
trigger1 = animelem = 3
value = 40,0

[state 930, SE2]
type = playsnd
trigger1 = animelem = 6
value = 3,5

[state 930, SE3]
type = playsnd
trigger1 = animelem = 9
value = 100,3

[state 930, 移動速度]
type = velset
trigger1 = animelem = 4
x = 4

[state 930, ブレーキ]
type = statetypeset
trigger1 = animelem = 9
physics = S

[state 930, エフェクト1]
type = explod
trigger1 = animelem = 7
anim = 7000
ID = 7000
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[state 930, エフェクト1の除去]
type = removeexplod
trigger1 = animelem = 8
ID = 7000

[state 930, エフェクト2]
type = explod
trigger1 = animelem = 8
anim = 7001
ID = 7001
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[state 930, エフェクト2の除去]
type = removeexplod
trigger1 = animelem = 9
ID = 7001

[state 930, エフェクト3]
type = explod
trigger1 = animelem = 9
anim = 7002
ID = 7002
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[state 930, 攻撃判定]
type = hitdef
trigger1 = (AnimElemNo(0) = [7,8]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(112 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-70
hitsound = s2,2
guardsound = s1,1
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 1
fall.recover = 1
fall.recovertime = 36+(4*var(11))
ground.slidetime = 27
ground.hittime = 27+(4*var(11))
ground.velocity = -6.0, -4.4
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 27+(4*var(11))
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 930, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(112*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 930, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 930, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(112*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 930, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 930, フォロースルー]
type = statetypeset
trigger1 = animelem = 9
movetype = I

[state 930, 軸移動]
type = posadd
trigger1 = animtime = 0
x = 10

[State 930, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-|通常技|--------------------------------------------------------------------------------------------------

;立ち弱パンチ
[statedef 201]
type    = S
movetype = A
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 201
poweradd = 0
sprpriority = 3

[state 201, SE]
type = playsnd
trigger1 = animelem = 1
value = 3,0

[State 201, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 2 && !movecontact && !movereversed
attr = S,NA
damage = ceil(26 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8200
guard.sparkno = s8100
sparkxy = -10,-80
hitsound = s2,0
guardsound = s1,0
animtype = Light
ground.type = High
air.type = High
fall = 0
fall.recovertime = 23+(2*var(11))
ground.slidetime = 14
ground.hittime = 14+(2*var(11))
ground.velocity = -4
guard.velocity = -4.4
air.velocity = -3.75, -5
air.hittime = 14+(2*var(11))
getpower = 60*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 201, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(26*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 201, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 201, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(26*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 201, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 201, フォロースルー]
type = statetypeset
trigger1 = animelem = 3
movetype = I

[State 201, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち中パンチ(近)
[statedef 202]
type    = S
movetype = A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 202
poweradd = 15*var(40)
sprpriority = 3

[state 202, SE]
type = playsnd
trigger1 = animelem = 1
value = 3, 1

[State 202, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 3 && !movecontact && !movereversed
attr = S,NA
damage = ceil(60 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = -20,-55
hitsound = s2, 1
guardsound = s1, 0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 202, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(60*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 202, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 202, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(60*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 202, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 202, フォロースルー]
type = statetypeset
trigger1 = animelem = 4
movetype = I

[State 202, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち中パンチ(遠)
[statedef 203]
type    = S
movetype = A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 203
poweradd = 15*var(40)
sprpriority = 3

[state 203, SE]
type = playsnd
trigger1 = animelem = 2
value = 3, 1

[State 203, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 4 && !movecontact && !movereversed
attr = S,NA
damage = ceil(60 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = -20,-80
hitsound = s2,1
guardsound = s1,0
animtype = Medium
ground.type = High
air.type = High
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 203, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(60*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 203, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 203, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(60*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 203, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 203, フォロースルー]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 203, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち強パンチ(近)
[statedef 204]
type    = S
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 204
poweradd = 15*var(40)
sprpriority = 2

[state 204, SE]
type = playsnd
trigger1 = animelem = 2
value = 3, 2

[state 204, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [3,4]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(92 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-75
hitsound = s2,2
guardsound = s1,0
animtype = Hard
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -10
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 204, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(92*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 204, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 204, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(92*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 204, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 204, フォロースルー]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 204, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち強パンチ(遠)
[statedef 205]
type    = S
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 205
poweradd = 15*var(40)
sprpriority = 3

[state 205, SE]
type = playsnd
trigger1 = animelem = 2
value = 3, 2

[state 205, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [5,6]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(86 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-70
hitsound = s2,2
guardsound = s1,0
animtype = Hard
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -10
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 205, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(100*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 205, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 205, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 205, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 205, フォロースルー]
type = statetypeset
trigger1 = animelem = 7
movetype = I

[State 205, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち弱キック
[statedef 211]
type    = S
movetype = A
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 211
poweradd = 0
sprpriority = 3

[state 211, SE]
type = playsnd
trigger1 = animelem = 1
value = 3, 3

[State 211, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 3 && !movecontact && !movereversed
attr = S,NA
damage = ceil(30 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8200
guard.sparkno = s8100
sparkxy = 0,-40
hitsound = s2,3
guardsound = s1,0
animtype = Light
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 23+(2*var(11))
ground.slidetime = 14
ground.hittime = 14+(2*var(11))
ground.velocity = -4
guard.velocity = -4.4
air.velocity = -3.75, -5
air.hittime = 14+(2*var(11))
getpower = 60*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 211, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(30*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 211, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 211, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(30*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 211, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 211, フォロースルー]
type = statetypeset
trigger1 = animelem = 4
movetype = I

[State 211, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち中キック(近)
[statedef 212]
type    = S
movetype = A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 212
poweradd = 15*var(40)
sprpriority = 3

[state 212, SE]
type = playsnd
trigger1 = animelem = 1
value = 3, 4

[State 212, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 3 && !movecontact && !movereversed
attr = S,NA
damage = ceil(60 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = -20,-50
hitsound = s2,4
guardsound = s1,0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 212, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(60*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 212, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 212, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(60*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 212, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 212, フォロースルー]
type = statetypeset
trigger1 = animelem = 4
movetype = I

[State 212, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち中キック(遠)
[statedef 213]
type    = S
movetype = A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 213
poweradd = 15*var(40)
sprpriority = 2

[state 213, SE]
type = playsnd
trigger1 = animelem = 3
value = 3, 3

[State 213, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [4,5]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(55 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = -20,-30
hitsound = s2,4
guardsound = s1,0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 213, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(55*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 213, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 213, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(55*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 213, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 213, フォロースルー]
type = statetypeset
trigger1 = animelem = 6
movetype = I

[State 213, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち強キック(近)
[statedef 214]
type    = S
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 214
poweradd = 15*var(40)
sprpriority = 3

[state 214, SE]
type = playsnd
trigger1 = animelem = 1
value = 3, 5

[state 214, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [4,5]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(100 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-40
hitsound = s2,5
guardsound = s1,0
animtype = Hard
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -10
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 214, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(100*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 214, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 214, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 214, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 214, フォロースルー]
type = statetypeset
trigger1 = animelem = 6
movetype = I

[State 214, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち強キック(遠)
[statedef 215]
type    = S
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 215
poweradd = 15*var(40)
sprpriority = 3

[state 215, SE]
type = playsnd
trigger1 = animelem = 1
value = 3,5

[state 215, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [4,5]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(90 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-85
hitsound = s2,5
guardsound = s1,0
animtype = Hard
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -10
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 215, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(90*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 215, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 215, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(90*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 215, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 215, フォロースルー]
type = statetypeset
trigger1 = animelem = 6
movetype = I

[State 215, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-|通常技(しゃがみ攻撃)|--------------------------------------------------------------------------------------

;しゃがみ弱パンチ
[statedef 301]
type    = C
movetype = A
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 301
poweradd = 0
sprpriority = 3

[state 301, SE]
type = playsnd
trigger1 = animelem = 1
value = 3,0

[State 301, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 3 && !movecontact && !movereversed
attr = C,NA
damage = ceil(23 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8200
guard.sparkno = s8100
sparkxy = -10,-25
hitsound = s2,0
guardsound = s1,0
animtype = Light
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 23+(2*var(11))
ground.slidetime = 14
ground.hittime = 14+(2*var(11))
ground.velocity = -4
guard.velocity = -4.4
air.velocity = -3.75, -5
air.hittime = 14+(2*var(11))
getpower = 60*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 301, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(23*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 301, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 301, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(23*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 301, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 301, フォロースルー]
type = statetypeset
trigger1 = animelem = 4
movetype = I

[State 301, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ中パンチ
[statedef 303]
type    = C
movetype = A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 303
poweradd = 15*var(40)
sprpriority = 3

[state 303, SE]
type = playsnd
trigger1 = animelem = 1
value = 3, 1

[State 303, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 4 && !movecontact && !movereversed
attr = C,NA
damage = ceil(63 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = -20,-40
hitsound = s2, 1
guardsound = s1, 0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 303, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(63*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 303, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 303, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(63*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 303, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 303, フォロースルー]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 303, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ強パンチ
[statedef 305]
type    = C
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 305
poweradd = 15*var(40)
sprpriority = 3

[state 305, SE]
type = playsnd
trigger1 = animelemtime(6) = 2
value = 3, 2

[state 305, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 7 && !movecontact && !movereversed
attr = C,NA
damage = ceil(100 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-65
hitsound = s2,2
guardsound = s1,0
animtype = Hard
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -10
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 305, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(200*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 305, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 305, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 305, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 305, フォロースルー]
type = statetypeset
trigger1 = animelem = 8
movetype = I

[State 305, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ弱キック
[statedef 311]
type    = C
movetype = A
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 311
poweradd = 0
sprpriority = 3

[state 311, SE]
type = playsnd
trigger1 = animelem = 1
value = 3, 3

[State 311, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 2 && !movecontact && !movereversed
attr = C,NA
damage = ceil(28 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = L
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8200
guard.sparkno = s8100
sparkxy = 0,-5
hitsound = s2,3
guardsound = s1,0
animtype = Light
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 23+(2*var(11))
ground.slidetime = 14
ground.hittime = 14+(2*var(11))
ground.velocity = -4
guard.velocity = -4.4
air.velocity = -3.75, -5
air.hittime = 14+(2*var(11))
getpower = 60*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 311, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(28*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 311, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 311, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(28*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 311, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 311, フォロースルー]
type = statetypeset
trigger1 = animelem = 3
movetype = I

[State 311, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ中キック
[statedef 313]
type    = C
movetype = A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 313
poweradd = 15*var(40)
sprpriority = 2

[state 313, SE]
type = playsnd
trigger1 = animelem = 2
value = 3, 3

[State 313, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 4 && !movecontact && !movereversed
attr = C,NA
damage = ceil(70 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = L
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = 0,-5
hitsound = s2,4
guardsound = s1,0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 313, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(70*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 313, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 313, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(70*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 313, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 313, フォロースルー]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 313, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ強キック
[statedef 315]
type    = C
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 315
poweradd = 30*var(40)
sprpriority = 3

[state 315, SE]
type = playsnd
trigger1 = animelem = 2
value = 3, 5

[state 315, 接触判定拡大]
type = width
trigger1 = animelem = 2
value = 30

[state 315, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [5,6]) && !movecontact && !movereversed
attr = C,NA
damage = ceil(76 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = L
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-5
hitsound = s2,5
guardsound = s1,0
animtype = Hard
ground.type = trip
air.type = High
fall = 1
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = 0,-3.5
guard.velocity = -11
air.velocity = 0,-3.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 315, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(76*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 315, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 315, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(76*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 315, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 315, フォロースルー]
type = statetypeset
trigger1 = animelem = 7
movetype = I

[state 315, 接触判定縮小]
type = width
trigger1 = animelem = 10
value = 15

[State 315, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-|通常技(ジャンプ攻撃)|-------------------------------------------------------------------------------------

;ジャンプ弱パンチ
[statedef 401]
type    = A
movetype =A
physics = N
juggle = 1
ctrl = 0
anim = 401
poweradd = 15*var(40)
sprpriority = 2

[state 401, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 401, SE]
type = playsnd
trigger1 = animelem = 1
value = 3,0

[state 401, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [2,3]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(40 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8200
guard.sparkno = s8100
sparkxy = 0,-45
hitsound = s2,0
guardsound = s1,0
animtype = Light
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 23+(2*var(11))
ground.slidetime = 12
ground.hittime = 12+(2*var(11))
guard.ctrltime = 14
ground.velocity = -4
guard.velocity = -4.4
air.velocity = -3.75, -5
airguard.velocity = -4, -1
air.hittime = 14+(2*var(11))
getpower = 60*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 401, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(40*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 401, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 401, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(40*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 401, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 401, フォロースルー]
type = statetypeset
trigger1 = animelem = 4 && prevstateno != 55
movetype = I

[state 401, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 7
value = 1

[State 401, 終了(通常ジャンプ時)]
type = ChangeState
trigger1 = Pos Y >= 0 && prevstateno != 55
value = 52

[State 401, 終了(小ジャンプ時)]
type = changestate
trigger1 = Pos Y >= 0 && prevstateno = 55
value = 57

;ジャンプ中パンチ
[statedef 403]
type    = A
movetype =A
physics = N
juggle = 1
ctrl = 0
anim = 403
poweradd = 15*var(40)
sprpriority = 2

[state 403, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 403, SE]
type = playsnd
trigger1 = animelem = 1
value = 3,1

[state 403, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [4,5]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(60 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = 0,-30
hitsound = s2,1
guardsound = s1,0
animtype = Medium
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 23+(2*var(11))
ground.slidetime = 14
ground.hittime = 14+(3*var(11))
guard.ctrltime = 19
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
airguard.velocity = -5, -1
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 403, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(60*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 403, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 403, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(60*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 403, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 403, フォロースルー]
type = statetypeset
trigger1 = animelem = 6 && prevstateno != 55
movetype = I

[state 403, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 9
value = 1

[State 403, 終了(通常ジャンプ時)]
type = ChangeState
trigger1 = Pos Y >= 0 && prevstateno != 55
value = 52

[State 403, 終了(小ジャンプ時)]
type = changestate
trigger1 = Pos Y >= 0 && prevstateno = 55
value = 57

;ジャンプ強パンチ
[statedef 405]
type    = A
movetype =A
physics = N
juggle = 4
ctrl = 0
anim = 405
poweradd = 15*var(40)
sprpriority = 2

[state 405, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 405, 空中投げから移行した場合のアニメ変更]
type = changeanim
trigger1 = prevstateno = 720 && time = 0
value = 405
elem = 2

[state 405, SE]
type = playsnd
trigger1 = animelem = 2
value = 3,2

[state 405, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [4,5]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(110 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-50
hitsound = s2,2
guardsound = s1,0
animtype = Hard
air.animtype = Up
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 14
ground.hittime = 14+(4*var(11))
guard.ctrltime = 23
ground.velocity = -10
guard.velocity = -11
air.velocity = -4.2, -5.5
airguard.velocity = -5.3, -1
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 405, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(110*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 405, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 405, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(110*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 405, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 405, フォロースルー]
type = statetypeset
trigger1 = animelem = 6 && prevstateno != 55
movetype = I

[state 405, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 11
value = 1

[State 405, 終了(通常ジャンプ時)]
type = ChangeState
trigger1 = Pos Y >= 0 && prevstateno != 55
value = 52

[State 405, 終了(小ジャンプ時)]
type = changestate
trigger1 = Pos Y >= 0 && prevstateno = 55
value = 57

;ジャンプ弱キック
[statedef 411]
type    = A
movetype =A
physics = N
juggle = 1
ctrl = 0
anim = 411
poweradd = 15*var(40)
sprpriority = 2

[state 411, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 411, SE]
type = playsnd
trigger1 = animelem = 1
value = 3,3

[state 411, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [2,3]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(50 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8200
guard.sparkno = s8100
sparkxy = 0,-30
hitsound = s2,0
guardsound = s1,0
animtype = Light
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 23+(2*var(11))
ground.slidetime = 12
ground.hittime = 12+(2*var(11))
guard.ctrltime = 14
ground.velocity = -4
guard.velocity = -4.4
air.velocity = -3.75, -5
airguard.velocity = -4, -1
air.hittime = 14+(2*var(11))
getpower = 60*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 411, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(50*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 411, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 411, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(50*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 411, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 411, フォロースルー]
type = statetypeset
trigger1 = animelem = 4 && prevstateno != 55
movetype = I

[state 411, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 7
value = 1

[State 411, 終了(通常ジャンプ時)]
type = ChangeState
trigger1 = Pos Y >= 0 && prevstateno != 55
value = 52

[State 411, 終了(小ジャンプ時)]
type = changestate
trigger1 = Pos Y >= 0 && prevstateno = 55
value = 57

;ジャンプ中キック(垂直)
[statedef 412]
type    = A
movetype =A
physics = N
juggle = 1
ctrl = 0
anim = 412
poweradd = 15*var(40)
sprpriority = 2

[state 412, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 412, SE]
type = playsnd
trigger1 = animelem = 1
value = 3,4

[state 412, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [3,4]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(56 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = 0,-40
hitsound = s2,4
guardsound = s1,0
animtype = Medium
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 14
ground.hittime = 14+(3*var(11))
guard.ctrltime = 19
ground.velocity = -6
air.velocity = -4, -5.2
airguard.velocity = -5, -1
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 412, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(56*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 412, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 412, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(56*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 412, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 412, フォロースルー]
type = statetypeset
trigger1 = animelem = 5 && prevstateno != 55
movetype = I

[state 412, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 9
value = 1

[State 412, 終了(通常ジャンプ時)]
type = ChangeState
trigger1 = Pos Y >= 0 && prevstateno != 55
value = 52

[State 412, 終了(小ジャンプ時)]
type = changestate
trigger1 = Pos Y >= 0 && prevstateno = 55
value = 57

;ジャンプ中キック(斜め)
[statedef 413]
type    = A
movetype =A
physics = N
juggle = 1
ctrl = 0
anim = 413
poweradd = 15*var(40)
sprpriority = 2

[state 413, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 413, SE]
type = playsnd
trigger1 = time = 2
value = 3,4

[state 413, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [3,4]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(54 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 3,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = 0,-40
hitsound = s2,4
guardsound = s1,0
animtype = Medium
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 14
ground.hittime = 14+(3*var(11))
guard.ctrltime = 19
ground.velocity = ifelse(P2BodyDist X >= 0,-6,6)
air.velocity = ifelse(P2BodyDist X >= 0,-4,4), -5.2
airguard.velocity = ifelse(P2BodyDist X >= 0,-5,5), -1
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 413, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(54*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 413, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 413, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(54*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 413, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 413, フォロースルー]
type = statetypeset
trigger1 = animelem = 5 && prevstateno != 55
movetype = I

[state 413, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 9
value = 1

[State 413, 終了(通常ジャンプ時)]
type = ChangeState
trigger1 = Pos Y >= 0 && prevstateno != 55
value = 52

[State 413, 終了(小ジャンプ時)]
type = changestate
trigger1 = Pos Y >= 0 && prevstateno = 55
value = 57

;ジャンプ強キック
[statedef 415]
type    = A
movetype =A
physics = N
juggle = 4
ctrl = 0
anim = 415
poweradd = 15*var(40)
sprpriority = 2

[state 415, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 415, SE]
type = playsnd
trigger1 = animelem = 2
value = 3,5

[state 415, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [3,4]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(63 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-30
hitsound = s2,5
guardsound = s1,0
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 14
ground.hittime = 14+(4*var(11))
guard.ctrltime = 23
ground.velocity = -10
air.velocity = -4.2, -5.5
airguard.velocity = -5.3, -1
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 415, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(63*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 415, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 415, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(63*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 415, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 415, フォロースルー]
type = statetypeset
trigger1 = animelem = 5 && prevstateno != 55
movetype = I

[state 415, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 9
value = 1

[State 415, 終了(通常ジャンプ時)]
type = ChangeState
trigger1 = Pos Y >= 0 && prevstateno != 55
value = 52

[State 415, 終了(小ジャンプ時)]
type = changestate
trigger1 = Pos Y >= 0 && prevstateno = 55
value = 57

;ジャンプ強キック(追加)、通常ジャンプ時
[statedef 420]
type    = A
movetype =A
physics = N
juggle = 4
ctrl = 0
anim = 420
poweradd = 15*var(40)
sprpriority = 2

[state 420, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 420, SE]
type = playsnd
trigger1 = animelem = 2
value = 3,5

[state 420, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [4,5]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(30 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-30
hitsound = s2,5
guardsound = s1,0
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 14
ground.hittime = 14+(4*var(11))
guard.ctrltime = 23
ground.velocity = -10
air.velocity = -4.2, -5.5
airguard.velocity = -5.3, -1
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 420, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(30*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 420, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 420, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(30*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 420, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 420, フォロースルー]
type = statetypeset
trigger1 = animelem = 6
movetype = I

[state 420, フォロースルー2]
type = ctrlset
trigger1 = prevstateno != 55
trigger1 = animelem = 10
value = 1

[State 420, 終了]
type = ChangeState
trigger1 = Pos Y >= 0
value = 52

;ジャンプ強キック(追加)、小ジャンプ時
[statedef 421]
type    = A
movetype =A
physics = N
juggle = 4
ctrl = 0
anim = 420
poweradd = 15*var(40)
sprpriority = 2

[state 421, 重力]
type = veladd
trigger1 = 1
y = 0.62

[state 421, SE]
type = playsnd
trigger1 = animelem = 2
value = 3,5

[state 421, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [4,5]) && !movecontact && !movereversed
attr = A,NA
damage = ceil(30 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HA
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-30
hitsound = s2,5
guardsound = s1,0
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 14
ground.hittime = 14+(4*var(11))
guard.ctrltime = 23
ground.velocity = -10
air.velocity = -4.2, -5.5
airguard.velocity = -5.3, -1
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 421, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(30*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 421, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 421, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(30*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 421, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[State 421, 終了]
type = ChangeState
trigger1 = Pos Y >= 0
value = 57

;-|コンビネーションアーツ|---------------------------------------------------------------------------------

;立ち中パンチ→強パンチ
[statedef 501]
type    = S
movetype =A
physics = S
juggle = 4
velset = 2,0
ctrl = 0
anim = 501
poweradd = 15*var(40)
sprpriority = 2

[state 501, SE]
type = playsnd
trigger1 = animelem = 3
value = 3, 2

[state 501, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 5 && !movecontact && !movereversed
attr = S,NA
damage = ceil(42 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-50
hitsound = s2,2
guardsound = s1,0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 32+(4*var(11))
forcestand = 1
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 501, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(42*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 501, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 501, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(42*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 501, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 501, フォロースルー]
type = statetypeset
trigger1 = animelem = 6
movetype = I

[State 501, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち中パンチ→強パンチ→強キック
[statedef 502]
type    = S
movetype =A
physics = S
juggle = 4
ctrl = 0
anim = 502
poweradd = 15*var(40)
sprpriority = 3

[state 502, 速度設定]
type = velset
trigger1 = animelem = 3
x = 6

[state 502, SE]
type = playsnd
trigger1 = animelem = 3
value = 3, 5

[state 502, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [6,7]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(49 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-85
hitsound = s2,5
guardsound = s1,0
animtype = DiagUp
ground.type = High
air.type = High
fall = 1
fall.recover = 0
fall.recovertime = 53+(4*var(11));36+(4*var(11))
ground.slidetime = 23
ground.hittime = 44+(4*var(11));27+(4*var(11))
ground.velocity = -3.8,-10.8
guard.velocity = -11
air.velocity = -3.8, -6.8
air.hittime = 44+(4*var(11));27+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 502, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(49*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 502, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 502, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(49*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 502, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 502, フォロースルー]
type = statetypeset
trigger1 = animelem = 8
movetype = I

[State 502, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;シールドチョッパー
[statedef 503]
type = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 503
poweradd = 15*var(40)
sprpriority = 2

[state 503, 座標移動]
type = posadd
trigger1 = animelem = 3
x = 29

[state 503, SE]
type = playsnd
trigger1 = animelem = 6
value = 3,4

[state 503, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [8,9]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(56 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = H
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = -20,-40
hitsound = s2,4
guardsound = s1,0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 503, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(56*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 503, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 503, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(56*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 503, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 503, フォロースルー]
type = statetypeset
trigger1 = animelem = 10
movetype = I

[state 503, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;-|通常投げ|--------------------------------------------------------------------------------

;蹴り飛ばし
[statedef 700]
type = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 700
poweradd = 15*var(40)
sprpriority = 2

[state 700, ガード動作移行無効化]
type = attackdist
trigger1 = time = 0
value = 0

[state 700, 攻撃判定]
type = hitdef
triggerall = (P2stateno != [150,155]) && P2stateno != 40
triggerall = P2bodydist X = [-32, 32]
triggerall = var(6) = 0
trigger1 = animelem = 2
attr = S,NT
hitflag = HL
priority = 1, miss
sparkno = -1
P2facing = 1
P1stateno = 701
P2stateno = 705
animtype = DiagUp
ground.type = High
air.type = High
fall = 1
fall.recover = 0
fall.recovertime = 81
ground.velocity = -4.2,-9.8
air.velocity = -4.2, -9.8
ground.hittime = 23
air.hittime = 23
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 700, フォロースルー]
type = statetypeset
trigger1 = animelem = 3
movetype = I

[state 700, 空振りモーション終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;蹴り飛ばし(投げ動作)
[statedef 701]
type = S
movetype = A
physics = N
anim = 701
sprpriority = 2
poweradd = 0

[state 701, SE]
type = playsnd
trigger1 = time = 0
value = 700,0

[state 701, 壁接触判定拡大]
type = width
trigger1 = time = 0
edge = 15,50

[state 701, 投げられ側座標1]
type = targetbind
trigger1 = animelemtime(5) <= 0
pos = 42, 0

[state 701, 投げ抜けフラグリセット]
type = varset
trigger1 = time = 0 || time = 7
var(8) = 0

[state 701, 投げ抜けフラグセット]
type = varset
triggerall = time <= 6 && var(7) = 0
triggerall = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "x" || target,command = "y" || target,command = "z"
trigger1 = target,command != "a" && target,command != "b" && target,command != "c"
var(8) = 1

[state 701, 投げ抜け移行]
type = changestate
triggerall = (time = [1,6]) && var(7) = 0
trigger1 = var(8) = 1
value = 760

[state 701, 描画優先度の調整]
type = sprpriority
trigger1 = animelem = 3
value = 0

[state 701, SE1]
type = playsnd
trigger1 = animelem = 5
value = 3,3

[state 701, SE2]
type = playsnd
trigger1 = animelem = 6
value = 2,4

[state 701, ヒットマーク]
type = explod
trigger1 = animelem = 6
anim = 8201
pos = 42,-23
postype = P1
scale = 1,1
sprpriority = 3

[state 701, ヒットカウント]
type = hitadd
trigger1 = animelem = 6
value = 1

[state 701, ヒットカウント(コンボ補正用)]
type = varadd
trigger1 = animelem = 6
var(10) = 1

[state 701, 投げダメージ1]
type = targetlifeadd
trigger1 = animelem = 6
value = ceil(-42 * (fvar(1)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 701, 投げられ側座標2]
type = targetbind
trigger1 = animelem = 6
pos = 42, 0

[state 701, 投げられ側を投げられステート2へ]
type = targetstate
trigger1 = animelem = 6
value = 706

[state 701, 描画優先度を戻す]
type = sprpriority
trigger1 = animelem = 7
value = 2

[state 701, SE3]
type = playsnd
trigger1 = animelem = 13
value = 3,5

[state 701, SE4]
type = playsnd
trigger1 = animelem = 16
value = 2,5

[state 701, ヒットマーク2]
type = explod
trigger1 = animelem = 16
anim = 8202
pos = 62, -74
postype = P1
scale = 1,1
sprpriority = 3

[state 701, ヒットカウント2]
type = hitadd
trigger1 = animelem = 16
value = 1

[state 701, ヒットカウント(コンボ補正用)2]
type = varadd
trigger1 = animelem = 16
var(10) = 1

[state 701, 投げダメージ2]
type = targetlifeadd
trigger1 = animelem = 16
value = ceil(-84 * (fvar(1)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 701, 投げられ側座標3]
type = targetbind
trigger1 = animelem = 16
pos = 45, -0

[state 701, 投げられ側を投げられ終了ステートに送る]
type = targetstate
trigger1 = animelem = 16
value = 707

[state 701, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;蹴り飛ばし(投げられ動作1)
[statedef 705]
type = A
movetype = H
physics = N
velset = 0, 0
sprpriority = 1

[state 705, 投げられ動作アニメ]
type = changeanim2
trigger1 = time = 0
value = 705

;蹴り飛ばし(投げられ動作2)
[statedef 706]
type = A
movetype = H
physics = N
sprpriority = 1
velset = 0, -5.3

[state 706, 投げられ動作アニメ2]
type = changeanim
trigger1 = time = 0
value = 5070

[state 706, 投げられ動作無敵]
type = nothitby
trigger1 = 1
value = SCA

[state 706, 重力]
type = veladd
trigger1 = 1
y = 0.4

;投げられ終了～ダウン
[statedef 707]
type = A
movetype = H
physics = N

[state 707, 投げられ終了]
type = selfstate
trigger1 = time = 1
value = 5000

;放り投げ
[statedef 710]
type = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 710
poweradd = 15*var(40)
sprpriority = 2

[state 710, ガード動作移行無効化]
type = attackdist
trigger1 = time = 0
value = 0

[state 710, 攻撃判定]
type = hitdef
triggerall = (P2stateno != [150,155]) && P2stateno != 40
triggerall = P2bodydist X = [-32, 32]
triggerall = var(6) = 0
trigger1 = animelem = 2
attr = S,NT
hitflag = HL
priority = 1, miss
sparkno = -1
P2facing = 1
P1stateno = 711
P2stateno = 715
fall = 1
fall.recover = 0
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 710, フォロースルー]
type = statetypeset
trigger1 = animelem = 3
movetype = I

[state 710, 空振りモーション終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;放り投げ(投げ動作)
[statedef 711]
type = S
movetype = A
physics = N
anim = 711
poweradd = 0

[state 711, SE]
type = playsnd
trigger1 = time = 0
value = 700,0

[state 711, 投げ抜けフラグリセット]
type = varset
trigger1 = time = 0 || time = 4
var(8) = 0

[state 711, 投げ抜けフラグセット]
type = varset
triggerall = time <= 3 && var(7) = 0
triggerall = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "a" || target,command = "b" || target,command = "c"
trigger1 = target,command != "x" && target,command != "y" && target,command != "z"
var(8) = 1

[state 711, 投げ抜け移行]
type = changestate
triggerall = (time = [1,3]) && var(7) = 0
trigger1 = var(8) = 1
value = 760

[state 711, SE]
type = playsnd
trigger1 = animelem = 5
value = 3,5

[state 711, 投げられ側座標1]
type = targetbind
trigger1 = animelemtime(4) < 0
pos = 48,0

[state 711, 投げられ側座標2]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
pos = 10,-82

[state 711, 投げられ側座標3]
type = targetbind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
pos = 5,-88

[state 711, 投げられ側座標4]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
pos = -5,-94

[state 711, 投げられ側座標5]
type = targetbind
trigger1 = animelemtime(7) = 0
pos = -60,-95

[state 711, 接触判定拡大]
type = width
trigger1 = animelem = 6
edge = 0, 75

[state 711, 投げダメージ]
type = targetlifeadd
trigger1 = animelem = 7
value = ceil(-140 * (fvar(1)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 711, 投げられ側を投げられ終了ステートに送る]
type = targetstate
trigger1 = animelem = 7
value = 716

[state 711, ターン]
type = turn
trigger1 = animelem = 13

[state 711, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;放り投げ(投げられ動作)
[statedef 715]
type = A
movetype = H
physics = N
velset = 0, 0

[state 715, 投げられ動作アニメ]
type = changeanim2
trigger1 = time = 0
value = 715

;放り投げ(投げられ終了)
[statedef 716]
type = A
movetype = H
physics = N
velset = 0, 0

[state 716, 投げられ速度]
type = velset
trigger1 = time = 0
x = 8
y = -2.5

[state 716, 重力]
type = veladd
trigger1 = 1
y = 0.4

[state 716, 投げられ終了]
type = selfstate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 5100

;ナイトオウル
[statedef 720]
type    = A
movetype =A
physics = N
juggle = 4
ctrl = 0
anim = 720
poweradd = 0
sprpriority = 2

[state 720, 重力]
type = gravity
trigger1 = 1

[state 720, ガード動作移行無効化]
type = attackdist
trigger1 = time = 0
value = 0

[state 720, 攻撃判定]
type = hitdef
triggerall = (P2stateno != [150,155]) && P2stateno != 40
triggerall = P2bodydist X = [-24, 24]
triggerall = var(6) = 0
trigger1 = animelem = 1
attr = A,NT
hitflag = AF
priority = 1, miss
sparkno = -1
P2facing = 1
P1stateno = 721
P2stateno = 725
animtype = Hard
ground.type = High
air.type = High
fall = 1
fall.recover = 0
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 720, 空振りモーション～ジャンプ強Ｐへ移行]
type = changestate
trigger1 = animtime = 0
value = 405

;ナイトオウル(投げ動作)
[statedef 721]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 721

[state 721, SE]
type = playsnd
trigger1 = time = 0
value = 700,0

[state 721, 投げられ側座標1]
type = targetbind
trigger1 = animelemtime(2) < 0
pos = 27, 0

[state 721, 速度設定]
type = velset
trigger1 = animelem = 2
x = -2.5
y = -5.5

[state 721, 重力]
type = gravity
trigger1 = animelemtime(2) >= 0 

[state 721, 投げられ側座標2]
type = targetbind
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
pos = 37, -73

[state 721, 投げられ側座標3]
type = targetbind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
pos = 32, -85

[state 721, 投げられ側座標4]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
pos = -5, -108

[state 721, 投げられ側座標5]
type = targetbind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
pos = 6, -103

[state 721, 投げられ側座標6]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
pos = -12, -100

[state 721, 投げられ側座標7]
type = targetbind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
pos = -35, -50

[state 721, 投げられ側座標8]
type = targetbind
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
pos = -24, -8

[state 721, 投げられ側座標9]
type = targetbind
trigger1 = animelemtime(9) >= 0
pos = 0, 0

[state 721, 着地に移行]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= -20
value = 722

;ナイトオウル(投げ動作２)
[statedef 722]
type = A
movetype = A
physics = N
velset = 0, 0
ctrl = 0
anim = 722

[state 722, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 722, 速度設定]
type = velset
trigger1 = animelem = 2
x = -4
y = -5

[state 722, 重力]
type = veladd
trigger1 = animelemtime(2) >= 0
y = 0.4

[state 722, SE]
type = playsnd
trigger1 = time = 0
value = 5100,2

[state 722, 叩きつけエフェクト]
type = explod
trigger1 = time = 0
anim = 8211
pos = 0, 0
postype = P1
scale = 0.5,0.5
sprpriority = 3

[state 722, 投げダメージ]
type = targetlifeadd
trigger1 = time = 0
value = ceil(-140 * (fvar(1)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 722, 投げられ側を投げられ終了ステートに送る]
type = targetstate
trigger1 = time = 0
value = 726

[state 722, 動作終了]
type = changestate
trigger1 = animelemtime(2) > 0
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 723

;ナイトオウル(投げ動作終了)
[statedef 723]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 57

[state 723, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 723, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 723, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;ナイトオウル(投げられ動作)
[statedef 725]
type = A
movetype = H
physics = N
velset = 0, 0

[state 725, 投げられ動作アニメ]
type = changeanim2
trigger1 = time = 0
value = 725

;ナイトオウル(投げられ終了)
[statedef 726]
type = A
movetype = H
physics = N
velset = 0, 0

[state 726, 投げられ終了]
type = selfstate
trigger1 = time = 0
value = 5100

;-|投げ抜け|------------------------------------------------------------------------------

;投げ抜け動作(抜けられ側)
[statedef 760]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 5945
sprpriority = 0

[state 760, SE]
type = playsnd
trigger1 = time = 0
value = 700,1

[state 760, エフェクト]
type = explod
trigger1 = time = 0
anim = 8130
ID=8130
scale = 0.5,0.5
sprpriority = 2
postype = P2
pos = 30,-75

[state 760, 相手側を投げ抜けステートへ]
type = targetstate
trigger1 = time = 0
value = 765

[state 760, 速度]
type = velset
trigger1 = time = 0
x = -5.0

[state 760, 減速加速度]
type = veladd
trigger1 = vel X < -0.26
x = 0.26

[state 760, 動作終了]
type = changestate
trigger1 = time = 32
value = 0
ctrl = 1

;投げ抜け動作(抜け側)
[statedef 765]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[state 765, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 765, 接触判定無効]
type = playerpush
trigger1 = 1
value = 0

[state 765, アニメ]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5940)=1,5940,150)

[state 765, アニメ変更]
type = changeanim
trigger1 = anim = 150
trigger1 = time = 25
value = 140

[state 765, アニメ変更2]
type = changeanim
trigger1 = anim = 5940
trigger1 = time < 30 && animtime = 1
value = 5940
elem = animelemno(0)

[state 765, 速度]
type = velset
trigger1 = time = 0
x = -3

[state 765, 減速加速度]
type = veladd
trigger1 = vel X < -0.26
x = 0.12

[state 765, 動作終了]
type = selfstate
trigger1 = time = 30
value = 0
ctrl = 1


;-|カウンター攻撃|-------------------------------------------------------------------------------

;ハンマースイング（Ｐカウンター攻撃）
[statedef 810]
type    = S
movetype =A
physics = S
juggle = 4
velset = 0,0
ctrl = 0
anim = 205
poweradd = 15*var(40)
sprpriority = 3

[state 810, 背後に回られていたら振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2dist X < 0

[state 810, SE]
type = playsnd
trigger1 = animelem = 2
value = 3, 2

[state 810, 攻撃判定]
type = HitDef
trigger1 = (AnimElemNo(0) = [5,6]) && !movecontact && !movereversed
attr = S,NA
damage = ceil(100 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 5,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8100
sparkxy = -10,-70
hitsound = s2,2
guardsound = s1,0
animtype = Hard
ground.type = High
air.type = High
fall = 1
fall.recover = 1
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -6.0, -4.4
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 810, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(100*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 810, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 810, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 810, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 810, フォロースルー]
type = statetypeset
trigger1 = animelem = 7
movetype = I

[State 810, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ニーキック（Ｋカウンター攻撃）
[statedef 820]
type    = S
movetype = A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 212
poweradd = 15*var(40)
sprpriority = 3

[state 820, 背後に回られていたら振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2dist X < 0

[state 820, SE]
type = playsnd
trigger1 = animelem = 1
value = 3, 4

[State 820, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 3 && !movecontact && !movereversed
attr = S,NA
damage = ceil(60 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), 0
guardflag = HL
hitflag = HLAF
priority = 4,Hit
pausetime = 10,9
sparkno = s8201
guard.sparkno = s8100
sparkxy = -20,-50
hitsound = s2,4
guardsound = s1,0
animtype = Medium
ground.type = Low
air.type = Low
fall = 0
fall.recovertime = 28+(3*var(11))
ground.slidetime = 19
ground.hittime = 19+(3*var(11))
ground.velocity = -6
guard.velocity = -6.6
air.velocity = -4, -5.2
air.hittime = 19+(3*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 820, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(60*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 820, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 820, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(60*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 820, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 820, フォロースルー]
type = statetypeset
trigger1 = animelem = 4
movetype = I

[State 820, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;----|必殺技|-------------------------------------------------------------------------------------------------

;グラヴィトナックル(弱)
[statedef 1000]
type = S
movetype = A
physics = N
juggle = 1
velset = 0,0
ctrl = 0
anim = 1000
poweradd = 60*var(40)
sprpriority = 3

[state 1000, 接触判定拡大]
type = width
trigger1 = 1
value = 20,0

[state 1000, SE1]
type = playsnd
trigger1 = animelem = 2
value = 40,0

[state 1000, SE2]
type = playsnd
trigger1 = animelem = 5
value = 3,5

[state 1000, SE3]
type = playsnd
trigger1 = animelem = 8
value = 100,3

[state 1000, 移動速度]
type = velset
trigger1 = animelem = 3
x = 4

[state 1000, ブレーキ]
type = statetypeset
trigger1 = animelem = 8
physics = S

[state 1000, エフェクト1]
type = explod
trigger1 = animelem = 6
anim = 7000
ID = 7000
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1000, エフェクト1の除去]
type = removeexplod
trigger1 = animelem = 7
ID = 7000

[state 1000, エフェクト2]
type = explod
trigger1 = animelem = 7
anim = 7001
ID = 7001
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1000, エフェクト2の除去]
type = removeexplod
trigger1 = animelem = 8
ID = 7001

[state 1000, エフェクト3]
type = explod
trigger1 = animelem = 8
anim = 7002
ID = 7002
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1000, 攻撃判定]
type = hitdef
trigger1 = (AnimElemNo(0) = [6,7]) && !movecontact && !movereversed
attr = S,SA
damage = ceil(100 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(10 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HL
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-70
hitsound = s2,2
guardsound = s1,1
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 1
fall.recover = 1
fall.recovertime = 39+(4*var(11))
ground.slidetime = 30
ground.hittime = 30+(4*var(11))
ground.velocity = -6.0, -4.4
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 30+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1000, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(100*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1000, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 1000, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1000, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1000, フォロースルー]
type = statetypeset
trigger1 = animelem = 8
movetype = I

[state 1000, 軸移動]
type = posadd
trigger1 = animtime = 0
x = 10

[State 1000, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;グラヴィトナックル(中)
[statedef 1001]
type = S
movetype = A
physics = N
juggle = 1
velset = 0,0
ctrl = 0
anim = 1001
poweradd = 60*var(40)
sprpriority = 3

[state 1001, 接触判定拡大]
type = width
trigger1 = 1
value = 20,15

[state 1001, SE1]
type = playsnd
trigger1 = animelem = 2
value = 40,0

[state 1001, SE2]
type = playsnd
trigger1 = animelem = 5
value = 3,5

[state 1001, SE3]
type = playsnd
trigger1 = animelem = 8
value = 100,3

[state 1001, 移動速度]
type = velset
trigger1 = animelem = 3
x = 4.5

[state 1001, ブレーキ]
type = statetypeset
trigger1 = animelem = 8
physics = S

[state 1001, エフェクト1]
type = explod
trigger1 = animelem = 6
anim = 7000
ID = 7000
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1001, エフェクト1の除去]
type = removeexplod
trigger1 = animelem = 7
ID = 7000

[state 1001, エフェクト2]
type = explod
trigger1 = animelem = 7
anim = 7001
ID = 7001
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1001, エフェクト2の除去]
type = removeexplod
trigger1 = animelem = 8
ID = 7001

[state 1001, エフェクト3]
type = explod
trigger1 = animelem = 8
anim = 7002
ID = 7002
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1001, 攻撃判定]
type = hitdef
trigger1 = (AnimElemNo(0) = [6,7]) && !movecontact && !movereversed
attr = S,SA
damage = ceil(112 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(11 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HL
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-70
hitsound = s2,2
guardsound = s1,1
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 1
fall.recover = 1
fall.recovertime = 39+(4*var(11))
ground.slidetime = 30
ground.hittime = 30+(4*var(11))
ground.velocity = -6.0, -4.4
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 30+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1001, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(112*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1001, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 1001, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(112*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1001, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1001, フォロースルー]
type = statetypeset
trigger1 = animelem = 8
movetype = I

[state 1001, 軸移動]
type = posadd
trigger1 = animtime = 0
x = 10

[State 1001, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;グラヴィトナックル(強)
[statedef 1002]
type = S
movetype = A
physics = N
juggle = 1
velset = 0,0
ctrl = 0
anim = 1002
poweradd = 60*var(40)
sprpriority = 3

[state 1002, 接触判定拡大]
type = width
trigger1 = 1
value = 20,15

[state 1002, SE1]
type = playsnd
trigger1 = animelem = 2
value = 40,0

[state 1002, SE2]
type = playsnd
trigger1 = animelem = 5
value = 3,5

[state 1002, SE3]
type = playsnd
trigger1 = animelem = 8
value = 100,3

[state 1002, 移動速度]
type = velset
trigger1 = animelem = 3
x = 5

[state 1002, ブレーキ]
type = statetypeset
trigger1 = animelem = 8
physics = S

[state 1002, エフェクト1]
type = explod
trigger1 = animelem = 6
anim = 7000
ID = 7000
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1002, エフェクト1の除去]
type = removeexplod
trigger1 = animelem = 7
ID = 7000

[state 1002, エフェクト2]
type = explod
trigger1 = animelem = 7
anim = 7001
ID = 7001
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1002, エフェクト2の除去]
type = removeexplod
trigger1 = animelem = 8
ID = 7001

[state 1002, エフェクト3]
type = explod
trigger1 = animelem = 8
anim = 7002
ID = 7002
pos = 5,-22
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1002, 攻撃判定]
type = hitdef
trigger1 = (AnimElemNo(0) = [6,7]) && !movecontact && !movereversed
attr = S,SA
damage = ceil(126 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(13 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HL
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-70
hitsound = s2,2
guardsound = s1,1
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 1
fall.recover = 1
fall.recovertime = 39+(4*var(11))
ground.slidetime = 30
ground.hittime = 30+(4*var(11))
ground.velocity = -6.0, -4.4
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 30+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1002, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(126*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1002, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 1002, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(126*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1002, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1002, フォロースルー]
type = statetypeset
trigger1 = animelem = 8
movetype = I

[state 1002, 軸移動]
type = posadd
trigger1 = animtime = 0
x = 10

[state 1002, 終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;ブラッシュアウト
[statedef 1100]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 1100
poweradd = 60*var(40)
sprpriority = 3

[state 1100, SE]
type = playsnd
trigger1 = animelem = 4
value = 3,4

[state 1100, 攻撃判定]
type = hitdef
trigger1 = AnimElemNo(0) = 6 && !movecontact && !movereversed
attr = S,SA
damage = ceil(84 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(8 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HL
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-45
hitsound = s2,2
guardsound = s1,1
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 32+(4*var(11))
ground.velocity = 0,4.0
guard.velocity = -11
air.velocity = 0,4.0
air.hittime = 32+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1100, エフェクト1]
type = explod
trigger1 = animelem = 4
anim = 7100
ID = 7100
pos = 0,0
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1100, エフェクト1の除去]
type = removeexplod
trigger1 = animelem = 7
ID = 7100

[state 1100, エフェクト2]
type = explod
trigger1 = animelem = 7
anim = 7101
ID = 7101
pos = 0,0
postype = P1
facing = 1
bindtime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1100, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(84*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1100, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 1100, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(84*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1100, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1100, フォロースルー]
type = statetypeset
trigger1 = animelem = 7
movetype = I

[state 1100, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;忍法「変わり身」(弱)
[statedef 1200]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 1200
poweradd = 60*var(40)
sprpriority = 3

[state 1200, 受け止め判定]
type = reversaldef
trigger1 = animelemtime(3) >= 0
reversal.attr = SCA,AA
pausetime = 0,60
priority = 7,hit
sparkno = s8200+random%3
sparkxy = 0,0
hitsound = s2,random%6
P1stateno = 1208
numhits = 0

[state 1200, 戻り動作へ移行]
type = changestate
trigger1 = animtime = 0
value = 1205
ctrl = 0

;忍法「変わり身」(中)
[statedef 1201]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 1201
poweradd = 60*var(40)
sprpriority = 3

[state 1201, 受け止め判定]
type = reversaldef
trigger1 = animelemtime(3) >= 0
reversal.attr = SCA,AA
priority = 7,hit
pausetime = 0,60
sparkno = s8200+random%3
sparkxy = 0,0
hitsound = s2,random%6
P1stateno = 1208
numhits = 0

[state 1201, 戻り動作へ移行]
type = changestate
trigger1 = animtime = 0
value = 1205
ctrl = 0

;忍法「変わり身」(強)
[statedef 1202]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 1202
poweradd = 60*var(40)
sprpriority = 3

[state 1202, 受け止め判定]
type = reversaldef
trigger1 = animelemtime(3) >= 0
reversal.attr = SCA,AA
priority = 7,hit
pausetime = 0,60
sparkno = s8200+random%3
sparkxy = 0,0
hitsound = s2,random%6
P1stateno = 1209
numhits = 0

[state 1202, 戻り動作へ移行]
type = changestate
trigger1 = animtime = 0
value = 1205
ctrl = 0

;忍法「変わり身」(戻り動作)
[statedef 1205]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1205
poweradd = 0
sprpriority = 0

[state 1205, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;忍法「変わり身」(反撃動作)(弱、中)
[statedef 1208]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0

[state 1208, ダミーを出す]
type = helper
trigger1 = time = 0
helpertype = normal
name = "dummy"
ID = 7400
pos = 0,0
postype = P1
stateno = 7400
ownpal = 0

[state 1208, 向き調整]
type = turn
trigger1 = facing*target,facing > 0

[state 1208, 飯綱落しへ移行]
type = changestate
trigger1 = var(15) = 2
trigger1 = time = 0
value = 1240

[state 1208, 天遁へ移行]
type = changestate
trigger1 = var(15) = 1
trigger1 = time = 0
value = 1220

[state 1208, 土遁へ移行]
type = changestate
trigger1 = time = 0
value = 1210

;忍法「変わり身」(反撃動作)(強)
[statedef 1209]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0

[state 1209, ダミーを出す]
type = helper
trigger1 = time = 0
helpertype = normal
name = "dummy"
ID = 7400
pos = 0,0
postype = P1
stateno = 7400
ownpal = 0

[state 1209, 向き調整]
type = turn
trigger1 = facing*target,facing > 0

[state 1209, 飯綱落しへ移行]
type = changestate
trigger1 = var(15) = 2
trigger1 = time = 0
value = 1240

[state 1209, 天遁へ移行]
type = changestate
trigger1 = var(15) = 1
trigger1 = time = 0
value = 1220

[state 1209, 土遁へ移行]
type = changestate
trigger1 = time = 0
value = 1215

;忍法「変わり身」土遁
[statedef 1210]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 1210
poweradd = 0
sprpriority = 3

[state 1210, 無敵]
type = nothitby
trigger1 = animelemtime(6) < 0
value = SCA,AA,AP,AT

[state 1210, 相手の目前まで移動]
type = posadd
trigger1 = time = 0
x = P2bodydist X - 15

[state 1210, 接触判定拡大]
type = width
trigger1 = animelemno(0) = [5,8]
value = 30,0

[state 1210, 攻撃判定]
type = hitdef
trigger1 = (AnimElemNo(0) = [7,8]) && !movecontact && !movereversed
attr = S,SA
damage = ceil(100 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(10 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HL
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -30,-77
hitsound = s2,5
guardsound = s1,1
animtype = diagup
air.animtype = diagup
ground.type = High
air.type = High
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 32+(4*var(11))
ground.velocity = -4.2,-10.8
guard.velocity = -11
air.velocity = -4.2,-10.8
air.hittime = 32+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1210, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(100*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1210, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 1210, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1210, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1210, フォロースルー]
type = statetypeset
trigger1 = animelem = 9
movetype = I

[state 1210, 位置調整]
type = posadd
trigger1 = animtime = 0
x = 15

[state 1210, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;忍法「変わり身」土遁(強)
[statedef 1215]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 1210
poweradd = 0
sprpriority = 3

[state 1215, 無敵]
type = nothitby
trigger1 = animelemtime(6) < 0
value = SCA,AA,AP,AT

[state 1215, 相手の背後まで移動]
type = posadd
trigger1 = time = 0
x = P2dist X + target,const(size.ground.back) + 15

[state 1215, 向き調整]
type = turn
trigger1 = P2dist X < 0

[state 1215, 接触判定拡大]
type = width
trigger1 = animelemno(0) = [5,8]
value = 30,0

[state 1215, 攻撃判定]
type = hitdef
trigger1 = (AnimElemNo(0) = [7,8]) && !movecontact && !movereversed
attr = S,SA
damage = ceil(100 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(10 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HL
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -30,-77
hitsound = s2,5
guardsound = s1,1
animtype = diagup
air.animtype = diagup
ground.type = High
air.type = High
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 32+(4*var(11))
ground.velocity = -4.2,-10.8
guard.velocity = -11
air.velocity = -4.2,-10.8
air.hittime = 32+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1215, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(100*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1215, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= ceil(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 1215, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1215, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1215, フォロースルー]
type = statetypeset
trigger1 = animelem = 9
movetype = I

[state 1215, 位置調整]
type = posadd
trigger1 = animtime = 0
x = 15

[state 1215, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;忍法「変わり身」天遁
[statedef 1220]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1220
poweradd = 0
sprpriority = 2

[state 1220, 無敵]
type = nothitby
trigger1 = animelemtime(7) < 0
value = SCA,AA,AT,AP

[state 1220, 相手の座標サーチ]
type = posadd
trigger1 = time = 0
x = P2bodydist X -60
y = -75

[state 1220, 速度設定]
type = velset
trigger1 = animelem = 6
x = 4.2
y = 8.0

[state 1220, SE]
type = playsnd
trigger1 = animelem = 6
value = 3,5

[state 1220, 攻撃判定]
type = hitdef
trigger1 = AnimElemNo(0) = 7 && !movecontact && !movereversed
attr = A,SA
damage = ceil(56 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(4 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HA
hitflag = HLAF
priority = 6,Hit
pausetime = 5,4
sparkno = s8202
guard.sparkno = s8101
sparkxy = -30,-33
hitsound = s2,5
guardsound = s1,1
animtype = diagup
air.animtype = diagup
ground.type = High
air.type = High
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 32+(4*var(11))
ground.velocity = -4.8,-10.8
guard.velocity = -11
air.velocity = -4.8,-10.8
air.hittime = 32+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 1220, 気絶値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
trigger1 = movehit
var(22) = floor(42*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1220, ガードクラッシュ値加算]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
trigger1 = moveguarded
var(25) = floor(42*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1220, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1220, 相手を特殊やられステートに飛ばす]
type = targetstate
trigger1 = movehit
value = 1222
ignorehitpause = 1
persistent = 0

[state 1220, 追加攻撃ステートに移行]
type = changestate
trigger1 = numtarget
trigger1 = target,stateno = 1222
value = 1221
ignorehitpause = 1
persistent = 0

[state 1220, 着地]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 1225

;忍法「変わり身」天遁(着地)
[statedef 1225]
type = C
movetype = I
physics = C
velset = 0,0
ctrl = 0
anim = 1225

[state 1225, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 1225, 座標調整2]
type = posadd
trigger1 = time = 0
x = 30

[state 1225, 相手方向に向く]
type = turn
trigger1 = animelem = 4
trigger1 = P2dist X < 0

[state 1225, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;忍法「変わり身」天遁(追加攻撃1)
[statedef 1221]
type = A
movetype = A
physics = N

[state 1221, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 1221, 相手側座標固定]
type = targetbind
trigger1 = 1
pos = 50,38

[state 1221, 着地～追加攻撃2へ移行]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 1230

;忍法「変わり身」天遁(追加攻撃)
[statedef 1230]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1230
sprpriority = 2

[state 1230, SE1]
type = playsnd
trigger1 = time = 0
value = 5100,2

[state 1230, たたきつけエフェクト]
type = explod
trigger1 = time = 0
anim = 8210
pos = 40,0
postype = P1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[state 1230, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 1230, 座標調整2]
type = posadd
trigger1 = time = 0
x = 30

[state 1230, 相手側座標調整]
type = targetbind
trigger1 = 1
pos = 40,0

[state 1230, 相手を踏まれステートに飛ばす1]
type = targetstate
trigger1 = time = 0
value = 1235

[state 1230, SE2]
type = playsnd
trigger1 = animelem = 12
value = 2,5

[state 1230, 踏みつけエフェクト]
type = explod
trigger1 = animelem = 12
anim = 8211
pos = 40,0
postype = P1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[state 1230, 振動]
type = envshake
trigger1 = animelem = 12
time = 6
ampl = 10
freq = 90

[state 1230, 相手を踏まれステートに飛ばす2]
type = targetstate
trigger1 = animelem = 12
value = 1236

[state 1230, 踏みつけダメージ]
type = targetlifeadd
trigger1 = animelem = 12
value = ceil(-84 * (fvar(1)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 1230, ヒット数追加]
type = hitadd
trigger1 = animelem = 12
value = 1

[state 1230, ヒット数カウント変数加算]
type = varadd
trigger1 = animelem = 12
var(10) = 1

[state 1230, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;忍法「変わり身」天遁(やられ動作)
[statedef 1222]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
anim = 5030
sprpriority = 1

[state 1222, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 1222, 落下アニメに変更]
type = changeanim
trigger1 = anim = 5030
trigger1 = animtime = 0
value = 5050

[state 1222, 吹き飛び状態に復帰]
type = selfstate
trigger1 = time = 120
value = 5030

;忍法「変わり身」天遁(踏まれ動作)
[statedef 1235]
type = A
movetype = H
physics = N
velset = 0,0

[state 1235, ふまれ動作アニメ]
type = changeanim2
trigger1 = time = 0
value = 1235

[state 1235, 死亡時]
type = selfstate
trigger1 = !alive
trigger1 = time  = 240
value = 5150

[state 1235, ダウン状態へ移行]
type = selfstate
trigger1 = time = 240
value = 5120

;忍法「変わり身」天遁(踏まれ動作2)
[statedef 1236]
type = A
movetype = H
physics = N
velset = 0,0

[state 1236, ふまれ動作アニメ]
type = changeanim2
trigger1 = time = 0
value = 1235

[state 1236, 死亡時]
type = selfstate
trigger1 = !alive
trigger1 = time  = 30
value = 5150

[state 1236, ダウン状態へ移行]
type = selfstate
trigger1 = time = 60
value = 5120


;忍法「変わり身」飯綱落し
[statedef 1240]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1240
poweradd = 0
sprpriority = 2

[state 1240, 無敵]
type = nothitby
trigger1 = animelemtime(3) < 0
value = SCA,AA,AT,AP

[state 1240, 相手の座標サーチ]
type = posadd
trigger1 = time = 0
x = P2bodydist X + 15
y = P2bodydist Y

[state 1240, 方向転換]
type = turn
trigger1 = time = 0

[state 1240, ガード動作移行無効化]
type = attackdist
trigger1 = time = 0
value = 0

[state 1240, 攻撃判定]
type = hitdef
trigger1 = animelem = 1
attr = A,ST
hitflag = AF
priority = 1, miss
sparkno = -1
P2facing = -1
P1stateno = 1245
P2stateno = 1250
animtype = Hard
ground.type = High
air.type = High
fall = 1
fall.recover = 0
getpower = ifelse(var(10)=0,180,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1240, 速度設定]
type = velset
trigger1 = animelem = 3
x = -2.5
y = -5.5

[state 1240, 重力]
type = gravity
trigger1 = animelemtime (3) >= 0

[state 1240, 着地へ移行]
type = changestate
trigger1 = animelemtime(3) > 0
trigger1 = vel Y >= 0
trigger1 = pos Y >= 0
value = 1241

;忍法「変わり身」飯綱落し着地
[statedef 1241]
type = A
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 47

[state 1241, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 1241, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;忍法「変わり身」飯綱落し(投げ動作)
[statedef 1245]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1245
poweradd = 0
sprpriority = 1

[state 1245, 壁接触判定拡大]
type = width
trigger1 = animelemtime(2) >= 0
edge = 15,40

[state 1245, SE1]
type = playsnd
trigger1 = animelem = 2
value = 700,0

[state 1245, SE2]
type = playsnd
trigger1 = animelem = 4
value = 3,5

[state 1245, 速度設定]
type = velset
trigger1 = animelem = 4
x = -4.8
y = -8.6

[state 1245, 重力]
type = veladd
trigger1 = animelemtime(4) >= 0
y = 0.62

[state 1245, 相手の座標調整1]
type = targetbind
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
pos = 15,0

[state 1245, 相手の座標調整2]
type = targetbind
trigger1 = animelemtime(2) >= 0 && animelemtime(4) < 0
pos = 35,-74

[state 1245, 相手の座標調整3]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(6) < 0
pos = 20,-88

[state 1245, 相手の座標調整4]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
pos = 0,-94

[state 1245, 相手の座標調整5]
type = targetbind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
pos = -30,-74

[state 1245, 相手の座標調整6]
type = targetbind
trigger1 = animelemtime(8) >= 0
pos = -30,-44

[state 1245, 叩きつけに移行]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 1246

;忍法「変わり身」叩きつけ動作
[statedef 1246]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1246

[state 1246, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 1246, 投げられ側座標調整]
type = targetbind
trigger1 = time = 0
pos = -15,-15

[state 1246, SE]
type = playsnd
trigger1 = time = 0
value = 5100,2

[state 1246, 振動]
type = envshake
trigger1 = time = 0
time = 6
ampl = 10
freq = 90

[state 1246, たたきつけエフェクト]
type = explod
trigger1 = time = 0
anim = 8211
pos = -15,0
postype = P1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[state 1246, 投げダメージ]
type = targetlifeadd
trigger1 = time = 0
value = ceil(-140 * (fvar(1)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 1246, 相手を叩きつけられステートに飛ばす]
type = targetstate
trigger1 = time = 0
value = 1255

[state 1246, 速度設定]
type = velset
trigger1 = animelem = 2
x = -6.0
y = -8.8

[state 1246, 重力]
type = veladd
trigger1 = animelemtime(2) >= 0
y = 0.9

[state 1246, 着地]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 1241

;忍法「変わり身」飯綱落し(投げられ動作)
[statedef 1250]
type = A
movetype = H
physics = N

[state 1250, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 1250, 技アニメ継続]
type = changeanim
trigger1 = time <= 22
trigger1 = animelemno(-1) != animelemno(0)
value = anim
elem = animelemno(-1)

[state 1250, 投げられアニメ]
type = changeanim2
trigger1 = time = 23
value = 1250

;忍法「変わり身」飯綱落し(投げられ終了)
[statedef 1255]
type = A
movetype = H
physics = N
velset = 0,0

[state 1255, 叩きつけられアニメ]
type = changeanim2
trigger1 = time = 0
value = 1255

[state 1255, 位置調整]
type = posset
trigger1 = animtime = 0
y = 0

[state 1255, 投げられ終了]
type = selfstate
trigger1 = animtime = 0
value = 5101


;忍法「風塵」・影渡り
[statedef 1300]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1300
poweradd = 0
sprpriority = 0

[state 1300, 無敵]
type = nothitby
trigger1 = animelemtime(3) < 0
value = ,AA,AP

[state 1300, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 1300, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7500
ID = 7500
pos = 0,0
postype = P1
facing = 1
vel = 0,0
scale = 0.5,0.5
sprpriority = 1

[state 1300, SE1]
type = playsnd
trigger1 = animelem = 2
value = 40,0

[state 1300, SE2]
type = playsnd
trigger1 = animelem = 3
value = 100,3

[state 1300, 速度設定]
type = velset
trigger1 = animelem = 2
x = 12.0

[state 1300, 摩擦設定]
type = veladd
trigger1 = animelemtime(2) > 0
trigger1 = vel X >= 0.2
x = -0.32

[state 1300, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;忍法「風塵」・雲隠れ
[statedef 1301]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1301
poweradd = 0
sprpriority = 0

[state 1301, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7500
ID = 7500
pos = 0,0
postype = P1
facing = 1
vel = 0,0
scale = 0.5,0.5
sprpriority = 1

[state 1301, 無敵]
type = nothitby
trigger1 = animelemtime(3) < 0
value = ,AA,AP

[state 1301, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 1301, SE1]
type = playsnd
trigger1 = animelem = 2
value = 40,1

[state 1301, SE2]
type = playsnd
trigger1 = animelem = 3
value = 3,5

[state 1301, 速度設定]
type = velset
trigger1 = animelem = 2
x = 7.0
y = -6.2

[state 1301, 重力]
type = veladd
trigger1 = animelemtime(2) > 0
y = 0.47

[state 1301, 着地へ移行]
type = changestate
trigger1 = animelemtime(2) > 0
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 57

;忍法「風塵」・岩戸割り
[statedef 1302]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 1302
poweradd = 60*var(40)
sprpriority = 0

[state 1302, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7500
ID = 7500
pos = 0,0
postype = P1
facing = 1
vel = 0,0
scale = 0.5,0.5
sprpriority = 1

[state 1302, 無敵]
type = nothitby
trigger1 = animelemtime(3) < 0
value = ,AA,AP

[state 1302, SE1]
type = playsnd
trigger1 = animelem = 2
value = 40,1

[state 1302, 速度設定]
type = velset
trigger1 = animelem = 2
x = 0.4
y = -10.4

[state 1302, 重力]
type = veladd
trigger1 = animelemtime(2) > 0
y = 0.62

[state 1302, SE2]
type = playsnd
trigger1 = animelem = 10
trigger2 = animelem = 11
value = 3,5

[state 1302, 攻撃判定]
type = hitdef
trigger1 = AnimElemNo(0) =10 && !movecontact && !movereversed
attr = S,SA
damage = ceil(42 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(4 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HA
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-58
hitsound = s2,2
guardsound = s1,1
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = 0
guard.velocity = 0
air.velocity = 0, -5.5
airguard.velocity = -1.0, -1.0
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1302, 攻撃接触フラグリセット]
type = movehitreset
trigger1 = animelem = 11

[state 1302, 攻撃判定2]
type = hitdef
trigger1 = AnimElemNo(0) =11 && !movecontact && !movereversed
attr = S,SA
damage = ceil(56 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(6 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = HA
hitflag = HLAF
priority = 6,Hit
pausetime = 10,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-58
hitsound = s2,2
guardsound = s1,1
animtype = Hard
air.animtype = back
ground.type = High
air.type = High
fall = 1
air.fall = 1
fall.recover = 0
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -3.8,-6.6
guard.velocity = -11
air.velocity = -3.8,-5.5
airguard.velocity = -5.3, -1.0
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 1302, 気絶値加算1]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = animelemno(0) = 10
trigger1 = movehit
var(22) = floor(42*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1302, 気絶値加算2]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = animelemno(0) = 11
trigger1 = movehit
var(22) = floor(56*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 1302, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(2) = 1
triggerall = numtarget
trigger1 = var(22) >= floor(enemy,const(data.life)*0.05)+var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 1302, ガードクラッシュ値加算1]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = animelemno(0) = 10
trigger1 = moveguarded
var(25) = floor(42*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1302, ガードクラッシュ値加算2]
type = varadd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = animelemno(0) = 11
trigger1 = moveguarded
var(25) = floor(56*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 1302, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = var(3) = 1
triggerall = numtarget
trigger1 = var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 1302, フォロースルー]
type = statetypeset
trigger1 = animelem = 12
movetype = I

[state 1302, 着地]
type = changestate
triggerall = animelemtime(2) > 0
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 57


;影移し(弱P)
[statedef 1900]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1900
poweradd = 0
sprpriority = -2

[state 1900, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7900
ID = 7900
pos = 0,0
postype = P1
facing = 1
vel = 4.0,-10.4
accel = 0,0.62
scale = 0.5,0.5
sprpriority = 2

[state 1900, 硬直解除]
type = ctrlset
trigger1 = time = 10
value = 1

[state 1900, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;影移し(中P)
[statedef 1901]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1900
poweradd = 0
sprpriority = -2

[state 1901, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7901
ID = 7901
pos = 0,0
postype = P1
facing = 1
vel = 0,-10.4
accel = 0,0.62
scale = 0.5,0.5
sprpriority = 2

[state 1901, 硬直解除]
type = ctrlset
trigger1 = time = 10
value = 1

[state 1901, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;影移し(強P)
[statedef 1902]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1900
poweradd = 0
sprpriority = -2

[state 1902, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7902
ID = 7902
pos = 0,0
postype = P1
facing = 1
vel = -3.8,-10.4
accel = 0, 0.62
scale = 0.5,0.5
sprpriority = 2

[state 1902, 硬直解除]
type = ctrlset
trigger1 = time = 10
value = 1

[state 1902, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;影移し(弱K)
[statedef 1903]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1900
poweradd = 0
sprpriority = -2

[state 1903, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7903
ID = 7903
pos = 0,0
postype = P1
facing = 1
vel = 3.2,0
accel = 0,0
scale = 0.5,0.5
sprpriority = 2

[state 1903, 硬直解除]
type = ctrlset
trigger1 = time = 10
value = 1

[state 1903, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;影移し(中K)
[statedef 1904]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1900
poweradd = 0
sprpriority = -2

[state 1904, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7904
ID = 7904
pos = 0,0
postype = P1
facing = 1
vel = 7.0,0
accel = 0,0
scale = 0.5,0.5
sprpriority = 2

[state 1904, 硬直解除]
type = ctrlset
trigger1 = time = 10
value = 1

[state 1904, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;影移し(強K)
[statedef 1905]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1900
poweradd = 0
sprpriority = -2

[state 1905, 分身発生]
type = explod
trigger1 = animelem = 1
anim = 7905
ID = 7905
pos = 0,0
postype = P1
facing = 1
vel = -2.5,0
scale = 0.5,0.5
sprpriority = 2

[state 1905, 硬直解除]
type = ctrlset
trigger1 = time = 10
value = 1

[state 1905, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;----|超必殺技|-----------------------------------------------------------------------------------------------

;絶招「剣流星」
[statedef 2000]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 2000
juggle = 0
poweradd = 0
sprpriority = 2

[state 2000, 残像]
type = afterimage
trigger1 = time = 0
time = 999
length = 20
timegap = 1
framegap = 2
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[state 2000, 無敵時間]
type = nothitby
trigger1 = time = 0
value = SCA,AA,AT,AP
time = 37

[state 2000, 背景暗転]
type = envcolor
trigger1 = time = 4
value = 0,0,0
time = 30
under = 1

[state 2000, エフェクト]
type = explod
trigger1 = time = 4
anim = 8500
pos = -30,-97
postype = P1
supermove = 1
pausemovetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1

[state 2000, POWMAX終了]
type = varset
trigger1 = var(40) = 0
trigger1 = life > lifemax*0.35
trigger1 = time = 0
var(20) = 0

[state 2000, パワー消費]
type = poweradd
trigger1 = var(40) = 1
trigger1 = time = 0
value = -1000

[state 2000, 画面暗転・時間停止]
type = superpause
trigger1 = time = 4
Time = 33
Anim = -1
Sound = s8500,0
MoveTime = 33
Darken = 0
P2DefMul = 1
PowerAdd = 0
UnHittable = 0

[state 2000, SE1]
type = playsnd
trigger1 = animelem = 4
value = 3,5

[state 2000, 速度設定]
type = velset
trigger1 = animelem = 5
x = 16
y = 12

[state 2000, 攻撃判定]
type = HitDef
trigger1 = AnimElemNo(0) = 5 && !movecontact && !movereversed
attr = A,HA
damage = ceil(84 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(10 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-35
hitsound = s2,5
guardsound = s1,1
animtype = diagup
ground.type = High
air.type = High
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-11
guard.velocity = -11
air.velocity = 0, -9.5
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 2000, 接触判定消滅]
type = playerpush
trigger1 = movecontact
value = 0

[state 2000, 追加攻撃へ移行]
type = changestate
triggerall = movehit
triggerall = numtarget
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 2010

[state 2000, 着地へ移行（不発時）]
type = changestate
triggerall = !movehit || !numtarget
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 2015

;絶招「剣流星」追加攻撃
[statedef 2010]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 2010

[state 2010, 着地時の位置調整]
type = posadd
trigger1 = time = 0
x = 30

[state 2010, カメラ固定]
type = screenbound
trigger1 = 1
value = 0

[state 2010, 攻撃中の向き固定]
type = assertspecial
trigger1 = 1
flag = noautoturn

[state 2010, 移動1]
type = posadd
trigger1 = animelem = 6
x = floor(frontedgebodydist)
y = 20

[state 2010, 相手の座標調整]
type = targetbind
trigger1 = numtarget
trigger1 = animelem = 6
pos = -145, -150

[state 2010, 突進1]
type = velset
trigger1 = animelem = 7
x = -24
y = -18

[state 2010, 攻撃判定1]
type = HitDef
trigger1 = (AnimElemNo(0) = [7,9]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(14 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-80
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット1]
type = movehitreset
trigger1 = animelem = 10

[state 2010, 移動2]
type = posadd
trigger1 = animelem = 11
x = 25
Y = -45

[state 2010, 突進2]
type = velset
trigger1 = animelem = 11
x = 18
y = 24

[state 2010, 攻撃判定2]
type = HitDef
trigger1 = (AnimElemNo(0) = [11,13]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(14 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-38
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット2]
type = movehitreset
trigger1 = animelem = 14

[state 2010, 移動3]
type = posadd
trigger1 = animelem = 15
x = -200
Y = 0

[state 2010, 突進3]
type = velset
trigger1 = animelem = 15
x = 18
y = -24

[state 2010, 攻撃判定3]
type = HitDef
trigger1 = (AnimElemNo(0) = [15,17]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(14 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-95
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット3]
type = movehitreset
trigger1 = animelem = 18

[state 2010, 移動4]
type = posadd
trigger1 = animelem = 19
x = 20
Y = 40

[state 2010, 突進4]
type = velset
trigger1 = animelem = 19
x = -24
y = 18

[state 2010, 攻撃判定4]
type = HitDef
trigger1 = (AnimElemNo(0) = [19,21]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(14 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-45
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット4]
type = movehitreset
trigger1 = animelem = 22

[state 2010, 移動5]
type = posadd
trigger1 = animelem = 23
x = 240
Y = 0

[state 2010, 突進5]
type = velset
trigger1 = animelem = 23
x = -18
y = -24

[state 2010, 攻撃判定5]
type = HitDef
trigger1 = (AnimElemNo(0) = [23,25]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(18 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-95
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット5]
type = movehitreset
trigger1 = animelem = 26

[state 2010, 移動6]
type = posadd
trigger1 = animelem = 27
x = 0
Y = 260

[state 2010, 突進6]
type = velset
trigger1 = animelem = 27
x = 24
y = -18

[state 2010, 攻撃判定6]
type = HitDef
trigger1 = (AnimElemNo(0) = [27,29]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(22 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-85
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット6]
type = movehitreset
trigger1 = animelem = 30

[state 2010, 移動7]
type = posadd
trigger1 = animelem = 31
x = -30
Y = -60

[state 2010, 突進7]
type = velset
trigger1 = animelem = 31
x = -18
y = 24

[state 2010, 攻撃判定7]
type = HitDef
trigger1 = (AnimElemNo(0) = [31,33]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(27 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-38
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット7]
type = movehitreset
trigger1 = animelem = 34

[state 2010, 移動8]
type = posadd
trigger1 = animelem = 35
x = 0
Y = -200

[state 2010, 突進8]
type = velset
trigger1 = animelem = 35
x = 24
y = 18

[state 2010, 攻撃判定8]
type = HitDef
trigger1 = (AnimElemNo(0) = [35,37]) && !movecontact && !movereversed
attr = A,HA
damage = ceil(34 * (fvar(0)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(2 * (fvar(3)*fvar(4)*fvar(6)))
guardflag = H
hitflag = HLAF
priority = 6,Hit
pausetime = 0,9
sparkno = s8202
guard.sparkno = s8101
sparkxy = -10,-40
hitsound = s2,5
guardsound = s1,1
animtype = back
ground.type = Low
air.type = Low
fall = 1
fall.recover = 0
ground.slidetime = 27
ground.hittime = 9999 
ground.velocity = 0,-2
guard.velocity = -11
air.velocity = 0, -2
air.hittime = 9999
getpower = 0,0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5
kill = 0

[state 2010, ヒットフラグリセット8]
type = movehitreset
trigger1 = animelem = 38

[state 2010, 移動9]
type = posadd
trigger1 = animtime = 0
x = floor(P2bodydist X)
y = floor(P2bodydist Y)

[state 2010, フィニッシュ(投げ)に移行]
type = changestate
trigger1 = animtime = 0
value = 2060

;絶招「剣流星」フィニッシュ(投げ動作)
[statedef 2060]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 2060
poweradd = 0

[state 2060, ガード動作移行無効化]
type = attackdist
trigger1 = time = 0
value = 0

[state 2060, 攻撃判定]
type = hitdef
trigger1 = animelem = 1
attr = A,HT
hitflag = AF
priority = 1, miss
sparkno = -1
P2facing = 1
P1stateno = 2061
P2stateno = 2065
animtype = Hard
ground.type = High
air.type = High
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 30,30

[state 2060, 速度]
type = velset
trigger1 = animelem = 2
x = -2.5
y = -5.5

[state 2060, 重力]
type = gravity
trigger1 = animelemtime(2) >= 0

[state 2060, 残像を消す]
type = afterimagetime
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
time = 0

[state 2060, 着地]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 723

;絶招「剣流星」フィニッシュ(投げ動作)
[statedef 2061]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 721

[state 2061, SE]
type = playsnd
trigger1 = time = 0
value = 700,0

[state 2061, 投げられ側座標1]
type = targetbind
trigger1 = animelemtime(2) < 0
pos = 27, 0

[state 2061, 速度設定]
type = velset
trigger1 = animelem = 2
x = -2.5
y = -5.5

[state 2061, 重力]
type = gravity
trigger1 = animelemtime(2) >= 0 

[state 2061, 投げられ側座標2]
type = targetbind
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
pos = 37, -73

[state 2061, 投げられ側座標3]
type = targetbind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
pos = 32, -85

[state 2061, 投げられ側座標4]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
pos = -5, -108

[state 2061, 投げられ側座標5]
type = targetbind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
pos = 6, -103

[state 2061, 投げられ側座標6]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
pos = -12, -100

[state 2061, 投げられ側座標7]
type = targetbind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
pos = -35, -50

[state 2061, 投げられ側座標8]
type = targetbind
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
pos = -24, -8

[state 2061, 投げられ側座標9]
type = targetbind
trigger1 = animelemtime(9) >= 0
pos = 0, 0

[state 2061, 着地に移行]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= -20
value = 2062

;絶招「剣流星」フィニッシュ(投げ動作２)
[statedef 2062]
type = A
movetype = A
physics = N
velset = 0, 0
ctrl = 0
anim = 722

[state 2062, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 2062, 速度設定]
type = velset
trigger1 = animelem = 2
x = -4
y = -5

[state 2062, 重力]
type = veladd
trigger1 = animelemtime(2) >= 0
y = 0.4

[state 2062, SE]
type = playsnd
trigger1 = time = 0
value = 5100,2

[state 2062, 叩きつけエフェクト]
type = explod
trigger1 = time = 0
anim = 8211
pos = 0, 0
postype = P1
scale = 0.5,0.5
sprpriority = 3

[state 2062, 投げダメージ]
type = targetlifeadd
trigger1 = time = 0
value = ceil(-158 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 2062, 投げられ側を投げられ終了ステートに送る]
type = targetstate
trigger1 = time = 0
value = 2066

[state 2062, 残像を消す]
type = afterimagetime
trigger1 = animelemtime(2) > 0
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
time = 0

[state 2062, 動作終了]
type = changestate
trigger1 = animelemtime(2) > 0
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 723

;絶招「剣流星」フィニッシュ(投げられ動作)
[statedef 2065]
type = A
movetype = H
physics = N
velset = 0, 0

[state 2065, 投げられ動作アニメ]
type = changeanim2
trigger1 = time = 0
value = 725

;絶招「剣流星」フィニッシュ(投げられ終了)
[statedef 2066]
type = A
movetype = H
physics = N
velset = 0, 0

[state 2066, 投げられ終了]
type = selfstate
trigger1 = time = 0
value = 5100


;絶招「剣流星」着地
[statedef 2015]
type = C
movetype = I
physics = C
velset = 0,0
ctrl = 0
anim = 2015

[state 2015, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 2015, 座標調整2]
type = posadd
trigger1 = time = 0
x = 30

[state 2015, 相手方向に向く]
type = turn
trigger1 = animelem = 4
trigger1 = P2dist X < 0

[state 2015, 残像を消す]
type = afterimage
trigger1 = animtime = 0
time = 0
length = 8
timegap = 1
framegap = 2
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[state 2015, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1


;裏技「暗黒流星」
[statedef 2100]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 2100
juggle = 0
poweradd = 0
sprpriority = 2

[state 2100, 残像]
type = afterimage
trigger1 = time = 0
time = 999
length = 20
timegap = 1
framegap = 2
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[state 2100, 無敵時間]
type = nothitby
trigger1 = time = 0
value = SCA,AA,AT,AP
time = 40

[state 2100, 背景暗転]
type = envcolor
trigger1 = time = 4
value = 0,0,0
time = 30
under = 1

[state 2100, エフェクト]
type = explod
trigger1 = time = 4
anim = 8500
pos = -22,-65
postype = P1
supermove = 1
pausemovetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1

[state 2100, POWMAX終了]
type = varset
trigger1 = var(40) = 0
trigger1 = life > lifemax*0.35
trigger1 = time = 0
var(20) = 0

[state 2100, パワー消費]
type = poweradd
trigger1 = var(40) = 1
trigger1 = time = 0
value = -1000

[state 2100, 画面暗転・時間停止]
type = superpause
trigger1 = time = 4
Time = 34
Anim = -1
Sound = s8500,0
MoveTime = 34
Darken = 0
P2DefMul = 1
PowerAdd = 0
UnHittable = 0

[state 2100, SE1]
type = playsnd
trigger1 = animelem = 4
value = 40,1

[state 2100, 空中判定に移行]
type = statetypeset
trigger1 = animelem = 5
statetype = A

[state 2100, 速度]
type = velset
trigger1 = animelem = 5
x = 12.0
y = -10.0

[state 2100, 重力]
type = veladd
trigger1 = animelemtime (5) >= 0
y = 0.47

[state 2100, 攻撃判定]
type = hitdef
trigger1 = animelemno(0) = 5 && !movecontact && !movereversed
attr = A,HT
hitflag = AF
priority = 6, miss
sparkno = -1
P2facing = 1
P1stateno = 2110
P2stateno = 2115
animtype = Hard
ground.type = High
air.type = High
fall = 1
fall.recover = 0
getpower = 0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 2100, 座標調整]
type = posadd
trigger1 = animelem = 6
x = 15

[state 2100, フォロースルー]
type = statetypeset
trigger1 = animelem = 6
movetype = I

[state 2100, 着地に移行]
type = changestate
trigger1 = animelemtime(5) > 0
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 2120

;裏技「暗黒流星」投げ動作1
[statedef 2110]
type = A
movetype = A
physics = N
velset = 0,0
anim = 2110
ctrl = 0
sprpriority = 2

[state 2110, SE1]
type = playsnd
trigger1 = time = 0
value = 700,0

[state 2110, SE2]
type = playsnd
trigger1 = animelem = 2
value = 3,5

[state 2110, 速度設定]
type = velset
trigger1 = time = 0
x = 12.0
y = -6.2

[state 2110, 重力]
type = veladd
trigger1 = 1
y = 0.2

[state 2110, 投げられ側座標調整]
type = targetbind
trigger1 = 1
pos = 52,-60

[state 2110, 一定時間経過したら画面スクロールを停止(横長のステージ対策)]
type = screenbound
trigger1 = time > 45
movecamera = 0,1

[state 2110, 投げられ側を投げられ動作2へ飛ばす]
type = targetstate
trigger1 = frontedgedist <= 60
value = 2116

[state 2110, 叩きつけ～投げ動作2へ移行]
type = changestate
trigger1 = frontedgedist <= 60
value = 2111

;裏技「暗黒流星」投げ動作2
[statedef 2111]
type = A
movetype = A
physics = N
velset = 0,0
anim = 2111
ctrl = 0
sprpriority = 2

[state 2111, 座標調整]
type = posset
trigger1 = time = 0
x = 72*facing

[state 2111, 画面スクロールの固定]
type = screenbound
trigger1 = animelemtime(4) < 0
movecamera = 0,1

[state 2111, 投げられ側の座標固定1]
type = targetbind
trigger1 = animelemtime(2) < 0
pos = 85,-65

[state 2111, SE1]
type = playsnd
trigger1 = time = 0
value = 5100,2

[state 2111, 壁叩きつけエフェクト]
type = explod
trigger1 = time = 0
anim = 8213
pos = 80,-66
postype = P1
scale = 0.5,0.5
ownpal = 1
sprpriority = 3

[state 2111, 画面振動]
type = envshake
trigger1 = time = 0
time = 10

[state 2111, 投げダメージ1]
type = targetlifeadd
trigger1 = time = 0
value = ceil(-98 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 2111, ヒットカウント1]
type = hitadd
trigger1 = time = 0
value = 1

[state 2111, ヒットカウント(コンボ補正用)1]
type = varadd
trigger1 = time = 0
var(10) = 1

[state 2111, 座標調整]
type = posadd
trigger1 = animelem = 2
x = 28

[state 2111, 投げられ側座標固定2]
type = targetbind
trigger1 = animelemtime(2) >= 0 && animelemtime(4) < 0
pos = 50,-65

[state 2111, 速度設定]
type = velset
trigger1 = animelem = 4
x = -4.8
y = -12.4

[state 2111, 重力]
type = veladd
trigger1 = animelemtime(4) >= 0
y = 0.62

[state 2111, 投げられ側座標固定3]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
pos = 24,-96

[state 2111, 投げられ側座標固定4]
type = targetbind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
pos = 0,-105

[state 2111, 投げられ側座標固定5]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
pos = -32,-75

[state 2111, 投げられ側座標固定6]
type = targetbind
trigger1 = animelemtime(7) >= 0
pos = 0,-45

[state 2111, 投げられ側を投げられ終了動作に送る]
type = targetstate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 2117

[state 2111, 叩きつけ動作へ移行]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 2112

;裏技「暗黒流星」叩きつけ動作
[statedef 2112]
type = A
movetype = A
physics = N
velset = 0,0
anim = 2112
ctrl = 0
sprpriority = 2

[state 2112, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 2112, 向き反転]
type = turn
trigger1 = time = 0

[state 2112, 相手の向き調整]
type = targetfacing
trigger1 = time = 0
value = 1

[state 2112, 投げられ側座標固定]
type = targetbind
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
pos = 20,-20

[state 2112, SE]
type = playsnd
trigger1 = time = 0
value = 5100,2

[state 2112, 叩きつけエフェクト]
type = explod
trigger1 = time = 0
anim = 8212
pos = 10,0
postype = P1
scale = 0.5,0.5
ownpal = 1
sprpriority = 3

[state 2112, 画面振動]
type = envshake
trigger1 = time = 0
time = 12

[state 2112, 投げダメージ2]
type = targetlifeadd
trigger1 = time = 0
value = ceil(-175 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 2112, ヒットカウント2]
type = hitadd
trigger1 = time = 0
value = 1

[state 2112, ヒットカウント(コンボ補正用)2]
type = varadd
trigger1 = time = 0
var(10) = 1

[state 2112, 座標調整]
type = posadd
trigger1 = animelem = 2
x = -10

[state 2112, 速度]
type = velset
trigger1 = animelem = 2
x = -4.8
y = -6.2

[state 2112, 重力]
type = veladd
trigger1 = animelemtime(2) >= 0
y = 0.47

[state 2112, 着地へ移行]
type = changestate
trigger1 = animelemtime(3) > 0
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 2125


;裏技「暗黒流星」投げられ動作1
[statedef 2115]
type = A
movetype = H
physics = N

[state 2115, 投げられ動作アニメ1]
type = changeanim2
trigger1 = time = 0
value = 2115

[state 2115, スクロール停止]
type = screenbound
trigger1 = time > 45
movecamera = 0,1

;裏技「暗黒流星」投げられ動作2
[statedef 2116]
type = A
movetype = H
physics = N

[state 2116, 投げられ動作アニメ2]
type = changeanim2
trigger1 = time = 0
value = 2116

[state 2111, 画面スクロールの固定]
type = screenbound
trigger1 = animelemtime(4) < 0
movecamera = 0,1

;裏技「暗黒流星」投げられ動作終了
[statedef 2117]
type = A
movetype = H
physics = N
velset = 0,0

[state 2117, 叩きつけられアニメ]
type = changeanim2
trigger1 = time = 0
value = 2117

[state 2117, 位置調整]
type = posset
trigger1 = animtime = 0
y = 0

[state 2117, 投げられ終了]
type = selfstate
trigger1 = animtime = 0
value = 5101


;裏技「暗黒流星」着地動作
[statedef 2120]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 57

[state 2120, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 2120, SE]
type = playsnd
trigger1 = time = 0
value = 52,0

[state 2120, 残像を消す]
type = afterimagetime
trigger1 = animtime = 0
time = 0

[state 2120, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;裏技「暗黒流星」投げ終了動作
[statedef 2125]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 57

[state 2125, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 2125, 座標調整]
type = posset
trigger1 = time = 0
y = 0

[state 2125, SE]
type = playsnd
trigger1 = time = 0
value = 52,0

[state 2125, 残像を消す]
type = afterimagetime
trigger1 = animtime = 0
time = 0

[state 2125, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;----|潜在能力|-----------------------------------------------------------------------------------------------

;屠龍「闇琉絶火」
[statedef 3000]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 3000
poweradd = 0
sprpriority = 3

[state 3000, 残像]
type = afterimage
trigger1 = time = 0
time = 54
length = 8
timegap = 1
framegap = 2
PalBright = 1,1,1
PalContrast = 240,60,60
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[state 3000, 無敵時間]
type = nothitby
trigger1 = time = 0
value = SCA,AA,AT,AP
time = 38

[state 3000, 背景暗転]
type = envcolor
trigger1 = time = 4
value = 0,0,0
time = 30
under = 1

[state 3000, エフェクト]
type = explod
trigger1 = time = 4
anim = 8500
pos = -35,-60
postype = P1
supermove = 1
pausemovetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1

[state 3000, POWMAX終了]
type = varset
trigger1 = var(40) = 0
trigger1 = time = 0
var(20) = 0

[state 3000, パワー消費]
type = poweradd
trigger1 = var(40) = 1
trigger1 = time = 0
value = -3000

[state 3000, 画面暗転・時間停止]
type = superpause
trigger1 = time = 4
Time = 37
Anim = -1
Sound = s8500,0
MoveTime = 34
Darken = 0
P2DefMul = 1
PowerAdd = 0
UnHittable = 0

[state 3000, ガード動作移行無効化]
type = attackdist
trigger1 = time = 0
value = 0

[state 3000, 攻撃判定]
type = hitdef
triggerall = (P2stateno != [150,155]) && P2stateno != 40
triggerall = P2bodydist X = [-39, 39]
triggerall = var(6) = 0
trigger1 = animelem = 4
attr = S,HT
hitflag = HL
priority = 7, miss
sparkno = -1
P2facing = 1
P1stateno = 3010
P2stateno = 3020
animtype = DiagUp
ground.type = High
air.type = High
fall = 1
fall.recover = 0
ground.velocity = -4.2,-9.8
air.velocity = -4.2, -9.8
ground.hittime = 23
air.hittime = 23
getpower = 0
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 3000, フォロースルー]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[state 3000, 空振りモーション終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;屠龍「闇琉絶火」(乱舞動作)
[statedef 3010]
type = A
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 3010
sprpriority = 0
poweradd = 0

[state 3010, 掴みSE]
type = playsnd
trigger1 = time = 0
value = 700,0

[state 3010, 壁接触判定拡大]
type = width
trigger1 = time = 0
edge = 60,0

[state 3010, やられ側座標固定1]
type = targetbind
trigger1 = animelemtime(6) < 0
pos = 36,0

[state 3010, やられ側座標固定2]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(84) < 0
pos = 60,0

[state 3010, 画面暗転2]
type = BGpalfx
trigger1 = animelemtime(2) = [0,24]
time = 1
mul = 256-animelemtime(2)*10,256-animelemtime(2)*10,256-animelemtime(2)*10

[state 3010, 画面暗転3]
type = BGpalfx
trigger1 = animelemno(0) = [3,83]
time = 1
mul = 1,1,1

[state 3010, 自分暗転]
type = palfx
trigger1 = animelemtime(2) = [0,24]
time = 1
mul = 256-animelemtime(2)*10,256-animelemtime(2)*10,256-animelemtime(2)*10

[state 3010, 自分暗転2]
type = palfx
trigger1 = animelemno(0) = [3,83]
time = 1
mul = 1,1,1

[state 3010, 相手を食らい動作ステートに飛ばす1]
type = targetstate
trigger1 = animelem = 6
value = 3023

[state 3010, SE1]
type = playsnd
trigger1 = animelem = 6
value = 2,2

[state 3010, ヒットマーク1]
type = explod
trigger1 = animelem = 6
anim = 8202
pos = 69,-56
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, バックフラッシュ1]
type = explod
trigger1 = animelem = 6
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ1]
type = targetlifeadd
trigger1 = animelem = 6
value = ceil(-28 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント1]
type = hitadd
trigger1 = animelem = 6
value = 1

[state 3010, ヒットカウント(コンボ補正用)1]
type = varadd
trigger1 = animelem = 6
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす2]
type = targetstate
trigger1 = animelem = 13
value = 3021

[state 3010, SE2]
type = playsnd
trigger1 = animelem = 13
value = 2,0

[state 3010, ヒットマーク2]
type = explod
trigger1 = animelem = 13
anim = 8200
pos = 60,-81
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す1]
type = removeexplod
trigger1 = animelem = 13
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ2]
type = explod
trigger1 = animelem = 13
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ2]
type = targetlifeadd
trigger1 = animelem = 13
value = ceil(-28 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント2]
type = hitadd
trigger1 = animelem = 13
value = 1

[state 3010, ヒットカウント(コンボ補正用)2]
type = varadd
trigger1 = animelem = 13
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす3]
type = targetstate
trigger1 = animelem = 18
value = 3024

[state 3010, SE3]
type = playsnd
trigger1 = animelem = 18
value = 2,3

[state 3010, ヒットマーク3]
type = explod
trigger1 = animelem = 18
anim = 8200
pos = 68,-25
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す2]
type = removeexplod
trigger1 = animelem = 18
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ3]
type = explod
trigger1 = animelem = 18
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ3]
type = targetlifeadd
trigger1 = animelem = 18
value = ceil(-28 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント3]
type = hitadd
trigger1 = animelem = 18
value = 1

[state 3010, ヒットカウント(コンボ補正用)3]
type = varadd
trigger1 = animelem = 18
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす4]
type = targetstate
trigger1 = animelem = 24
value = 3025

[state 3010, SE4]
type = playsnd
trigger1 = animelem = 24
value = 2,4

[state 3010, ヒットマーク4]
type = explod
trigger1 = animelem = 24
anim = 8201
pos = 80,-16
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す3]
type = removeexplod
trigger1 = animelem = 24
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ4]
type = explod
trigger1 = animelem = 24
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ4]
type = targetlifeadd
trigger1 = animelem = 24
value = ceil(-28 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント4]
type = hitadd
trigger1 = animelem = 24
value = 1

[state 3010, ヒットカウント(コンボ補正用)4]
type = varadd
trigger1 = animelem = 24
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす5]
type = targetstate
trigger1 = animelem = 33
value = 3022

[state 3010, SE5]
type = playsnd
trigger1 = animelem = 33
value = 2,4

[state 3010, ヒットマーク5]
type = explod
trigger1 = animelem = 33
anim = 8201
pos = 82,-77
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す4]
type = removeexplod
trigger1 = animelem = 33
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ5]
type = explod
trigger1 = animelem = 33
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ5]
type = targetlifeadd
trigger1 = animelem = 33
value = ceil(-35 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント5]
type = hitadd
trigger1 = animelem = 33
value = 1

[state 3010, ヒットカウント(コンボ補正用)5]
type = varadd
trigger1 = animelem = 33
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす6]
type = targetstate
trigger1 = animelem = 39
value = 3026

[state 3010, SE6]
type = playsnd
trigger1 = animelem = 39
value = 2,2

[state 3010, ヒットマーク6]
type = explod
trigger1 = animelem = 39
anim = 8202
pos = 48,-56
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す5]
type = removeexplod
trigger1 = animelem = 39
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ6]
type = explod
trigger1 = animelem = 39
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ6]
type = targetlifeadd
trigger1 = animelem = 39
value = ceil(-44 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント6]
type = hitadd
trigger1 = animelem = 39
value = 1

[state 3010, ヒットカウント(コンボ補正用)6]
type = varadd
trigger1 = animelem = 39
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす7]
type = targetstate
trigger1 = animelem = 45
value = 3026

[state 3010, SE7]
type = playsnd
trigger1 = animelem = 45
value = 2,5

[state 3010, ヒットマーク7]
type = explod
trigger1 = animelem = 45
anim = 8202
pos = 58,-37
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す6]
type = removeexplod
trigger1 = animelem = 45
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ7]
type = explod
trigger1 = animelem = 45
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ7]
type = targetlifeadd
trigger1 = animelem = 45
value = ceil(-55 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント7]
type = hitadd
trigger1 = animelem = 45
value = 1

[state 3010, ヒットカウント(コンボ補正用)7]
type = varadd
trigger1 = animelem = 45
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす8]
type = targetstate
trigger1 = animelem = 51
value = 3023

[state 3010, SE8]
type = playsnd
trigger1 = animelem = 51
value = 2,2

[state 3010, ヒットマーク8]
type = explod
trigger1 = animelem = 51
anim = 8202
pos = 45,-70
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す7]
type = removeexplod
trigger1 = animelem = 51
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ8]
type = explod
trigger1 = animelem = 51
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ8]
type = targetlifeadd
trigger1 = animelem = 51
value = ceil(-70 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント8]
type = hitadd
trigger1 = animelem = 51
value = 1

[state 3010, ヒットカウント(コンボ補正用)8]
type = varadd
trigger1 = animelem = 51
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす9]
type = targetstate
trigger1 = animelem = 60
value = 3025

[state 3010, SE9]
type = playsnd
trigger1 = animelem = 60
value = 2,4

[state 3010, ヒットマーク9]
type = explod
trigger1 = animelem = 60
anim = 8201
pos = 50,-66
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す8]
type = removeexplod
trigger1 = animelem = 60
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ9]
type = explod
trigger1 = animelem = 60
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ9]
type = targetlifeadd
trigger1 = animelem = 60
value = ceil(-70 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント9]
type = hitadd
trigger1 = animelem = 60
value = 1

[state 3010, ヒットカウント(コンボ補正用)9]
type = varadd
trigger1 = animelem = 60
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす10]
type = targetstate
trigger1 = animelem = 64
value = 3023

[state 3010, SE10]
type = playsnd
trigger1 = animelem = 64
value = 2,4

[state 3010, ヒットマーク10]
type = explod
trigger1 = animelem = 64
anim = 8202
pos = 60,-75
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す9]
type = removeexplod
trigger1 = animelem = 64
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ10]
type = explod
trigger1 = animelem = 64
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ダメージ10]
type = targetlifeadd
trigger1 = animelem = 64
value = ceil(-70 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, ヒットカウント10]
type = hitadd
trigger1 = animelem = 64
value = 1

[state 3010, ヒットカウント(コンボ補正用)10]
type = varadd
trigger1 = animelem = 64
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす11]
type = targetstate
trigger1 = animelem = 76
value = 3026

[state 3010, SE11]
type = playsnd
trigger1 = animelem = 76
value = 2,4

[state 3010, ヒットマーク11]
type = explod
trigger1 = animelem = 76
anim = 8202
pos = 60,-75
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, ダメージ11]
type = targetlifeadd
trigger1 = animelem = 76
value = ceil(-70 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))
kill = 0

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す10]
type = removeexplod
trigger1 = animelem = 76
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, バックフラッシュ11]
type = explod
trigger1 = animelem = 76
trigger1 = numexplod(9998) = 0
anim = 9998
ID = 9998
pos = 160,240
postype = left
sprpriority = -3
ownpal = 1

[state 3010, ヒットカウント11]
type = hitadd
trigger1 = animelem = 76
value = 1

[state 3010, ヒットカウント(コンボ補正用)11]
type = varadd
trigger1 = animelem = 76
var(10) = 1

[state 3010, 相手を食らい動作ステートに飛ばす12]
type = targetstate
trigger1 = animelem = 84
value = 3030

[state 3010, 相手の座標再調整]
type = targetbind
trigger1 = animelemtime(84) >= 0 && animelemtime(100) < 0
pos = 75,0

[state 3010, SE12]
type = playsnd
trigger1 = animelem = 84
value = 2,5

[state 3010, ヒットマーク12]
type = explod
trigger1 = animelem = 84
anim = 8202
pos = 50,-60
postype = P1
sprpriority = 4
ownpal = 1

[state 3010, 前のバックフラッシュエフェクトが残っていたら消す11]
type = removeexplod
trigger1 = animelem = 84
trigger1 = numexplod(9998) = 1
ID = 9998

[state 3010, 画面振動]
type = envshake
trigger1 = animelem = 84
time = 20
ampl = 10

[state 3010, ダメージ12]
type = targetlifeadd
trigger1 = animelem = 84
value = ceil(-410 * (fvar(0)*fvar(3)*fvar(4)*fvar(5)*fvar(6)))

[state 3010, ヒットカウント12]
type = hitadd
trigger1 = animelem = 84
value = 1

[state 3010, ヒットカウント(コンボ補正用)12]
type = varadd
trigger1 = animelem = 84
var(10) = 1

[state 3010, 速度]
type = velset
trigger1 = animelem = 100
x = 8

[state 3010, 動作終了]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;屠龍「闇琉絶火」(乱舞やられ動作1）
[statedef 3020]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 3020, 掴まれ動作アニメ]
type = changeanim2
trigger1 = time = 0
value = 3020

[state 3020, 自分暗転]
type = palfx
trigger1 = animelemtime(2) = [0,24]
time = 1
mul = 256-animelemtime(2)*10,256-animelemtime(2)*10,256-animelemtime(2)*10

[state 3020, 自分暗転2]
type = palfx
trigger1 = animelemtime(2) > 24
time = 1
mul = 1,1,1

;屠龍「闇琉絶火」(乱舞やられ動作2：上段弱）
[statedef 3021]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 3021, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 3021, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 3021, 弱上段のけぞりアニメ]
type = changeanim
trigger1 = time = 0
value = 5000

[state 3021, 弱上段のけぞり戻りアニメ]
type = changeanim
trigger1 = anim = 5000
trigger1 = animtime = 0
value = 5005

[state 3021, 自分暗転]
type = palfx
trigger1 = 1
time = 1
mul = 1,1,1

;屠龍「闇琉絶火」(乱舞やられ動作3：上段中）
[statedef 3022]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 3022, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 3022, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 3022, 中上段のけぞりアニメ]
type = changeanim
trigger1 = time = 0
value = 5001

[state 3022, 中上段のけぞり戻りアニメ]
type = changeanim
trigger1 = anim = 5001
trigger1 = animtime = 0
value = 5006

[state 3022, 自分暗転]
type = palfx
trigger1 = 1
time = 1
mul = 1,1,1

;屠龍「闇琉絶火」(乱舞やられ動作4：上段強）
[statedef 3023]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 3023, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 3023, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 3023, 強上段のけぞりアニメ]
type = changeanim
trigger1 = time = 0
value = 5002

[state 3023, 強上段のけぞり戻りアニメ]
type = changeanim
trigger1 = anim = 5002
trigger1 = animtime = 0
value = 5007

[state 3023, 自分暗転]
type = palfx
trigger1 = 1
time = 1
mul = 1,1,1

;屠龍「闇琉絶火」(乱舞やられ動作5：下段弱）
[statedef 3024]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 3024, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 3024, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 3024, 弱下段のけぞりアニメ]
type = changeanim
trigger1 = time = 0
value = 5010

[state 3024, 弱下段のけぞり戻りアニメ]
type = changeanim
trigger1 = anim = 5010
trigger1 = animtime = 0
value = 5015

[state 3024, 自分暗転]
type = palfx
trigger1 = 1
time = 1
mul = 1,1,1

;屠龍「闇琉絶火」(乱舞やられ動作6：下段中）
[statedef 3025]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 3025, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 3025, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 3025, 中下段のけぞりアニメ]
type = changeanim
trigger1 = time = 0
value = 5001

[state 3025, 中下段のけぞり戻りアニメ]
type = changeanim
trigger1 = anim = 5011
trigger1 = animtime = 0
value = 5016

[state 3025, 自分暗転]
type = palfx
trigger1 = 1
time = 1
mul = 1,1,1

;屠龍「闇琉絶火」(乱舞やられ動作7：下段強）
[statedef 3026]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 3026, 無敵]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 3026, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 3026, 強下段のけぞりアニメ]
type = changeanim
trigger1 = time = 0
value = 5012

[state 3026, 強下段のけぞり戻りアニメ]
type = changeanim
trigger1 = anim = 5012
trigger1 = animtime = 0
value = 5017

[state 3026, 自分暗転]
type = palfx
trigger1 = 1
time = 1
mul = 1,1,1

;屠龍「闇琉絶火」(やられ終了動作）
[statedef 3030]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[state 3030, フィニッシュヒットやられアニメ]
type = changeanim2
trigger1 = time = 0
value = 3030

[state 3030, 吹っ飛びに移行]
type = changestate
trigger1 = animtime = 0
value = 3035

;屠龍「闇琉絶火」フィニッシュ吹き飛び動作
[statedef 3035]
type = A
movetype = H
physics = N

[state 3035, 吹っ飛び速度]
type = velset
trigger1 = time = 0
x = -6.0
y = -6.0

[state 3035, 重力]
type = veladd
trigger1 = 1
y = 0.47

[state 3035, 吹っ飛びアニメ]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5052)=1,5052,5030)

[state 3035, 吹っ飛びアニメ(下降)]
type = changeanim
trigger1 = anim = 5030
trigger1 = animtime = 0
value = 5050

[state 3035, 着地へ移行]
type = selfstate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 5100



;----|眩暈(スタン)|-------------------------------------------------------------------------------------------

;気絶吹き飛び
[statedef 5296]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
anim = 5030

[state 5296, 体力0以下ならKOへ移行]
type = selfstate
trigger1 = life <= 0
value = 5050

[state 5296, ダウン属性無効化]
type = hitfallset
trigger1 = time = 0
value = 0
xvel = 0
yvel = 0

[state 5296, 無敵化]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 5296, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 5296, 吹き飛び速度]
type = velset
trigger1 = time = 0
x = ifelse(P2dist X >0,-4.2,4.2)
y = -6.2

[state 5296, 重力]
type = veladd
trigger1 = 1
y = 0.47

[state 5296, 吹き飛びアニメ]
type = changeanim
triggerall = selfanimexist(5035) = 1
trigger1 = anim = 5030 && animtime = 0
trigger2 = anim = 5030 && animelemtime(1) >= 1 && vel Y >-2
value = 5035

[state 5296, 吹き飛びアニメ(落下)]
type = changeanim
trigger1 = selfanimexist(5035) = 0 && anim = 5030 && animtime = 0
trigger2 = anim = 5035 && animtime = 0
trigger3 = anim = 5035 && vel Y > 0 && pos Y >= 10
value = 5050

[state 5296, 吹き飛びアニメ(落下2)]
type = changeanim
trigger1 = selfanimexist(5060) = 1
trigger1 = anim = 5050
trigger1 = vel Y >= 2
value = 5060

[state 5296, バウンドへ移行]
type = changestate
trigger1 = time > 1
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 5297

;気絶吹き飛び(着地)
[statedef 5297]
type = A
movetype = H
physics = N
ctrl = 0
anim = 5100

[state 5297, 無敵化]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 5297, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 5297, 速度リセット]
type = velset
trigger1 = time = 0
y = 0

[state 5297, バウンド速度設定(x)]
type = velmul
trigger1 = time = 0
x = 0.76

[state 5297, バウンド速度設定(y)]
type = velset
trigger1 = animtime = 0
y = -4.6

[state 5297, バウンド移行]
type = changestate
trigger1 = animtime = 0
value = 5298

;気絶吹き飛び(バウンド)
[statedef 5298]
type = A
movetype = H
physics = N
ctrl = 0

[state 5296, 無敵化]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 5296, 接触判定消失]
type = playerpush
trigger1 = 1
value = 0

[state 5298, 重力]
type = veladd
trigger1 = 1
y = 0.47

[state 5298, アニメ変更]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5160),5160,5080)

[state 5298, 着地動作]
type = changestate
trigger1 = time > 1
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 5299

;気絶吹き飛び(ダウン移行)
[statedef 5299]
type = A
movetype = H
physics = N
ctrl = 0

[state 5299, 無敵化]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[state 5299, 位置調整]
type = posset
trigger1 = time = 0
y = 0

[state 5299, 速度リセット]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 5299, 叩きつけられモーション]
type = changeanim
trigger1 = time = 0
value = 5170

[state 5299, ダウン状態]
type = changeanim
trigger1 = anim = 5170 && animtime = 0
value = 5110

[state 5299, 起き上がり]
type = changeanim
trigger1 = anim = 5110 && time >= 30
value = 5120

[state 5299, 起き上がり～朦朧状態]
type = changestate
trigger1 = anim = 5120 && animtime = 0
value = 5300

;朦朧状態
[statedef 5300]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0
anim = 5300

[state 5300, 位置調節]
type = posset
trigger1 = time = 0
y = 0

[state 5300, 眩暈復帰]
type = changestate
trigger1 = time = 800
trigger2 = time > 0 && enemy,var(21) <= 0
value = 5301

;気絶動作終了
[statedef 5301]
type = S

[state 5301, 気絶動作終了]
type = selfstate
trigger1 = time = 0
value = 0
ctrl = 1

;----|ガードクラッシュ|-------------------------------------------------------------------------------

;立ちガードクラッシュ
[statedef 5910]
type = S
movetype = H
ctrl = 0

[state 5910, 体力0以下ならKOへ移行]
type = selfstate
trigger1 = life <= 0
value = 5050

[state 5910, ガードクラッシュアニメ]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5910),5910,5002)

[state 5910, 速度]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 5910, 位置調節]
type = posset
trigger1 = time = 0
y = 0

[state 5910, クラッシュ動作継続]
type = changeanim
trigger1 = anim = 5002
trigger1 = animtime = 0
value = 5002
elem = animelemno(-1)

[state 5910, クラッシュ(のけぞり)に移行]
type = changestate
trigger1 = hitshakeover
value = 5911

[statedef 5911]
type = S
movetype = H
ctrl = 0

[state 5911, クラッシュ動作継続]
type = changeanim
trigger1 = anim = 5002
trigger1 = animtime = 0
value = 5002
elem = animelemno(-1)

[state 5911, クラッシュ(戻り)に移行]
type = changestate
trigger1 = time = 47
value = 5912

;立ちガードクラッシュ(戻り)
[statedef 5912]
type = S
movetype = H
ctrl = 0

[state 5912, クラッシュ戻りアニメ]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5911),5911,5007)

[state 5912, 動作終了]
type = selfstate
trigger1 = animtime = 0
trigger2 = time = 13
value = 0
ctrl = 1

;しゃがみガードクラッシュ
[statedef 5920]
type = C
movetype = H
ctrl = 0

[state 5920, 体力0以下ならKOへ移行]
type = selfstate
trigger1 = life <= 0
value = 5050

[state 5920, クラッシュアニメ]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5920),5920,5022)

[state 5920, 速度]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 5920, 位置調節]
type = posset
trigger1 = time = 0
y = 0

[state 5920, クラッシュ動作継続]
type = changeanim
trigger1 = anim = 5022
trigger1 = animtime = 0
value = 5022
elem = animelemno(-1)

[state 5920, クラッシュ(のけぞり)に移行]
type = changestate
trigger1 = hitshakeover
value = 5921

[statedef 5921]
type = C
movetype = H
ctrl = 0

[state 5921, クラッシュ動作継続]
type = changeanim
trigger1 = anim = 5022
trigger1 = animtime = 0
value = 5022
elem = animelemno(-1)

[state 5921, クラッシュ(戻り)に移行]
type = changestate
trigger1 = time = 47
value = 5922

;しゃがみガードクラッシュ(戻り)
[statedef 5922]
type = C
movetype = H
ctrl = 0

[state 5922, クラッシュ戻りアニメ]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5921),5921,5027)

[state 5922, 動作終了]
type = selfstate
trigger1 = animtime = 0
trigger2 = time = 13
value = 11
ctrl = 1

;空中ガードクラッシュ
[statedef 5930]
type = A
movetype = H
physics = N
ctrl = 0

[state 5930, 体力0以下ならKOへ移行]
type = selfstate
trigger1 = life <= 0
value = 5050

[state 5930, クラッシュアニメ]
type = changeanim
trigger1 = time = 0
value = ifelse(selfanimexist(5930),5930,5022)

[state 5930, 速度リセット]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 5930, 速度取得]
type = hitvelset
trigger1 = hitshakeover
persistent = 0
x = 1
y = 1

[state 5930, 重力]
type = gravity
trigger1 = hitshakeover

[state 5930, クラッシュアニメ継続]
type = changeanim
trigger1 = anim = 5022
trigger1 = animtime = 0
value = 5022
elem = animelemno(-1)

[state 5930, 着地したらしゃがみガードクラッシュに移行]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 5920


;----|ヘルパー|---------------------------------------------------------------------------------------

;ブラッシュアウト飛び道具反射ヘルパー
[statedef 7200]
type = A
movetype = I
physics = N
anim = 9999

[state 7200, 無敵]
type = nothitby
trigger1 = 1
time = -1
value = SCA,AA,AT,AP

[state 7200, 本体追従]
type = posset
trigger1 = 1
x = root,pos X
y = root,pos Y

[state 7200, 自分の向きを確認]
type = turn
trigger1 = facing*root,facing < 0

[state 7200, 撃ち返し弾のmovehit検知をリセット]
type = varset
trigger1 = var(23) > 0
var(23) = 0

[state 7200, 撃ち返し弾のmovecontact検知をリセット]
type = varset
trigger1 = var(26) > 0
var(26) = 0

[state 7200, 撃ち返し弾のmoveguarded検知をリセット]
type = varset
trigger1 = var(27) > 0
var(27) = 0

[state 7200, 撃ち返し弾の変数を本体へ１]
type = parentvaradd
trigger1 = var(22) > 0
var(22) = var(22)

[state 7200, 撃ち返し弾の変数を本体へ２]
type = parentvaradd
trigger1 = var(25) > 0
var(25) = var(25)

[state 7200, 変数リセット１]
type = varset
trigger1 = var(22) > 0
var(22) = 0

[state 7200, 変数リセット２]
type = varset
trigger1 = var(25) > 0
var(25) = 0

[state 7200, ブラッシュアウト飛び道具反射ステートへ移行]
type = changestate
trigger1 = root,stateno = 1100
trigger1 = root,anim = 1100
trigger1 = root,animelemtime(4) > 2
trigger1 = root,animelemtime(7) < 0
value = 7210

[state 7200, 自壊]
type = destroyself
trigger1 = roundstate > 2

;飛び道具反射ステート
[statedef 7210]
type = A
movetype = I
physics = N
anim = 7210

[state 7210, 本体追従]
type = posset
trigger1 = 1
x = root,pos X
y = root,pos Y

[state 7210, 飛び道具以外に無敵]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 7210, 自分の向きを確認]
type = turn
trigger1 = facing*root,facing < 0

[state 7210, 撃ち返し弾のmovehit検知をリセット]
type = varset
trigger1 = var(23) > 0
var(23) = 0

[state 7210, 撃ち返し弾のmovecontact検知をリセット]
type = varset
trigger1 = var(26) > 0
var(26) = 0

[state 7210, 撃ち返し弾のmoveguarded検知をリセット]
type = varset
trigger1 = var(27) > 0
var(27) = 0

[state 7210, 撃ち返し弾の変数を本体へ１]
type = parentvaradd
trigger1 = var(22) > 0
var(22) = var(22)

[state 7210, 撃ち返し弾の変数を本体へ２]
type = parentvaradd
trigger1 = var(25) > 0
var(25) = var(25)

[state 7210, 変数リセット１]
type = varset
trigger1 = var(22) > 0
var(22) = 0

[state 7210, 変数リセット２]
type = varset
trigger1 = var(25) > 0
var(25) = 0

[state 7210, 飛び道具に当ったら撃ち返しステートに移行]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AT,AP
stateno = 7220
time = -1
ignorehitpause = 1
persistent = 0

[state 7210, 待機ステートに戻る]
type = changestate
trigger1 = root,stateno != 1100
trigger2 = root,stateno = 1100
trigger2 = root,anim = 1100
trigger2 = root,animelemtime(7) >= 0
value = 7200

;撃ち返し弾発射
[statedef 7220]
type = A
movetype = A
physics = N

[state 7220, 本体追従]
type = posset
trigger1 = 1
x = root,pos X
y = root,pos Y

[state 7220, 飛び道具以外に無敵]
type = nothitby
trigger1 = 1
time = -1
value = ,AA,AT

[state 7220, 自分の向きを確認]
type = turn
trigger1 = facing*root,facing < 0

[state 7220, 撃ち返し弾のmovehit検知をリセット]
type = varset
trigger1 = var(23) > 0
var(23) = 0

[state 7220, 撃ち返し弾のmovecontact検知をリセット]
type = varset
trigger1 = var(26) > 0
var(26) = 0

[state 7220, 撃ち返し弾のmoveguarded検知をリセット]
type = varset
trigger1 = var(27) > 0
var(27) = 0

[state 7220, 撃ち返し弾の変数を本体へ１]
type = parentvaradd
trigger1 = var(22) > 0
var(22) = var(22)

[state 7220, 撃ち返し弾の変数を本体へ２]
type = parentvaradd
trigger1 = var(25) > 0
var(25) = var(25)

[state 7220, 変数リセット１]
type = varset
trigger1 = var(22) > 0
var(22) = 0

[state 7220, 変数リセット２]
type = varset
trigger1 = var(25) > 0
var(25) = 0

[state 7220, 撃ち返し弾発射]
type = helper
trigger1 = time = 0
helpertype = normal
name = "uchikaeshi"
ID = 7300
stateno = 7300
pos = 66,-60
postype = p1
ownpal = 1

[state 7220, 飛び道具に当ったら撃ち返しステートに移行]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AT,AP
stateno = 7220
time = -1
ignorehitpause = 1
persistent = 0

[state 7220, 反射ステートに戻る]
type = changestate
trigger1 = time = 0
value = 7210


;ブラッシュアウト撃ち返し弾
[statedef 7300]
type = A
movetype = A
physics = N
velset = 0,0
juggle = 1
ctrl = 0
anim = 7300
poweradd = 0

[state 7300, SE]
type = playsnd
trigger1 = time = 0
value = 1100,0

[state 7300, 弾速設定]
type = velset
trigger1 = animelem = 2
x = 12.0

[state 7300, 飛び道具に接触]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AT,AP
stateno = 7310

[state 7300, 飛び道具以外に無敵]
type = nothitby
trigger1 = 1
time = -1
value = ,AA,AT

[state 7300, コンボ補正値]
type = varset
trigger1 = 1
fvar(1) = root,fvar(1)

[state 7300, カウンターヒット補正値]
type = varset
trigger1 = 1
fvar(2) = root,fvar(2)

[state 7300, 残体力補正値(自分)]
type = varset
trigger1 = 1
fvar(3) = root,fvar(3)

[state 7300, 残体力補正値(相手)]
type = varset
trigger1 = 1
fvar(4) = root,fvar(4)

[state 7300, POWゲージ補正値]
type = varset
trigger1 = 1
fvar(6) = root,fvar(6)

[state 7300, ガードクラッシュ値連続ガード補正]
type = varset
trigger1 = 1
fvar(7) = root,fvar(7)

[state 7300, ガードクラッシュ値状態補正]
type = varset
trigger1 = 1
fvar(8) = root,fvar(8)

[state 7300, カウンターヒット補正値(気絶値用)]
type = varset
trigger1 = 1
fvar(9) = root,fvar(9)

[state 7300, カウンターヒット判定(硬直時間変化用)]
type = varset
trigger1 = 1
var(11) = root,var(11)

[state 7300, 攻撃判定]
type = HitDef
trigger1 = animelemtime(2) >= 0 && !movecontact && !movereversed
attr = A,SP
damage = ceil(100 * (fvar(1)*fvar(2)*fvar(3)*fvar(4)*fvar(6))), ceil(7*(fvar(3)*fvar(4)*fvar(6)))
guardflag = HLA
hitflag = HLAF
priority = 5,Hit
pausetime = 0,9
sparkno = s8203
guard.sparkno = -1
sparkxy = -10,0
hitsound = s2,2
guardsound = s1,1
animtype = Hard
ground.type = High
air.type = High
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 32+(4*var(11))
ground.slidetime = 23
ground.hittime = 23+(4*var(11))
ground.velocity = -4.2, -5.5
guard.velocity = -11
air.velocity = -4.2, -5.5
air.hittime = 23+(4*var(11))
getpower = ifelse(var(10)=0,120,60)*var(40),30*var(40)
givepower = 30,30
yaccel = 0.47
fall.yvelocity = -4.5

[state 7300, movehitを親helperに通達]
type = parentvaradd
trigger1 = movehit = 1
var(23) = 1

[state 7300, movecontactを親helperに通達]
type = parentvaradd
trigger1 = movecontact = 1
var(26) = 1

[state 7300, moveguardedを親helperに通達]
type = parentvaradd
trigger1 = moveguarded = 1
var(27) = 1

[state 7300, 気絶値加算]
type = parentvaradd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = root,var(2) = 1
trigger1 = movehit = 1
var(22) = floor(100*fvar(9)*0.1)
ignorehitpause = 1
persistent = 0

[state 7300, 気絶]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = root,var(2) = 1
triggerall = numtarget
trigger1 = root,var(22) >= ceil(enemy,const(data.life)*0.05)+root,var(24)*10
trigger1 = movehit
trigger1 = target,alive
persistent = 0
value = 5296

[state 7300, ガードクラッシュ値加算]
type = parentvaradd
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = root,var(3) = 1
trigger1 = moveguarded = 1
var(25) = floor(100*fvar(7)*fvar(8))
ignorehitpause = 1
persistent = 0

[state 7300, ガードクラッシュ]
type = targetstate
triggerall = numenemy
triggerall = enemy,teammode = single || enemy,teammode = turns
triggerall = !teammode = simul
triggerall = root,var(3) = 1
triggerall = numtarget
trigger1 = root,var(25) >= ceil(0.007*enemy,lifemax*enemy,const(data.defence))
trigger1 = moveguarded
ignorehitpause = 1
persistent = 0
value = ifelse(target,statetype=A,5930,ifelse(target,statetype=C,5920,5910))

[state 7300, 自壊ステートへ跳ぶ]
type = changestate
trigger1 = movecontact
trigger2 = movereversed
trigger3 = frontedgedist <= -40
value = 7310


;ブラッシュアウト撃ち返し弾消滅
[statedef 7310]
type = A
movetype = I
physics = N
velset = 0,0
anim = 8203

[state 7310, 弾消滅]
type = destroyself
trigger1 = animtime = 0


;忍法「変わり身」ダミー
[statedef 7400]
type = S
movetype = I
physics = S
anim = 7400
velset = ifelse(P2bodydist X>=0,-8.0,8.0),0

[state 7400, 自壊]
type = destroyself
trigger1 = animtime = 0


;イントロ継続ヘルパー
[statedef 9000]
type = S
anim = 9999

[state 9000, 自壊タイマーセット]
type = varset
trigger1 = time = 0
var(0) = 300

[state 9000, 自壊タイマーカウントダウン]
type = varadd
trigger1 = 1
var(0) = -1

[state 9000, イントロ継続命令]
type = assertspecial
trigger1 = 1
flag = intro

[state 9000, 自壊]
type = destroyself
trigger1 = time > 0 && var(0) = 0
trigger2 = root,var(41) = 1
